"use strict";(self.webpackChunklyldesigner=self.webpackChunklyldesigner||[]).push([[270],{93506:(t,e,n)=>{n.r(e)},25097:function(t,e,n){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(41918);e.default=function(t){var e=t.fillOpacity,n=void 0===e?1:e,r=t.strokeWidth,a=void 0===r?1:r,s=t.strokeOpacity,l=void 0===s?1:s,d=t.fill,u=void 0===d?"transparent":d,h=t.stroke,p=void 0===h?"#000":h,c=t.points,f=t.className,y={fill:u,fillOpacity:n,strokeWidth:a,stroke:p,strokeOpacity:l,points:"",className:void 0===f?"lf-basic-shape":f};return y.points=c.map((function(t){return t.join(",")})).join(" "),i.h("polygon",o({},y))}},37457:function(t,e,n){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(41918);function r(t){var e=t.x,n=t.y,r=t.width,a=t.height,s=t.radius,l=t.className,d=e-r/2,u=n-a/2,h=o(o({width:10,height:10,cx:0,cy:0,rx:s||0,ry:s||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+l},t),{x:d,y:u});return i.h("rect",o({},h))}e.default=r,r.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""}},74836:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0});var s=n(59622),l=n(41918),d=n(37457),u=n(84217),h=l.LogicFlowUtil.StepDrag,p=function(t){function e(e){var n=t.call(this)||this;return n.updatePosition=function(t){var e=t.deltaX,o=t.deltaY,i=n.nodeModel,r=i.x,a=i.y;n.nodeModel.x=r+e/2,n.nodeModel.y=a+o/2,n.nodeModel.moveText(e/2,o/2)},n.getResize=function(t){var e=t.index,n=t.deltaX,o=t.deltaY,i=t.width,r=t.height,a=t.PCTResizeInfo,s=t.pct,l=void 0===s?1:s,d=t.freezeWidth,u=void 0!==d&&d,h=t.freezeHeight,p=void 0!==h&&h,c={width:i,height:r,deltaX:n,deltaY:o};if(a){var f=0,y=0;switch(e){case 0:y=(-1*n-o)/4;break;case 1:y=(n-o)/4;break;case 2:y=(n+o)/4;break;case 3:y=(-1*n+o)/4}0!==y&&(f=Math.round(y/a.ResizeBasis.basisHeight*1e5)/1e3),a.ResizePCT.widthPCT=Math.max(Math.min(a.ResizePCT.widthPCT+f,a.ScaleLimit.maxScaleLimit),a.ScaleLimit.minScaleLimit),a.ResizePCT.hightPCT=Math.max(Math.min(a.ResizePCT.hightPCT+f,a.ScaleLimit.maxScaleLimit),a.ScaleLimit.minScaleLimit);var g=Math.round(a.ResizePCT.widthPCT*a.ResizeBasis.basisWidth/100),v=Math.round(a.ResizePCT.hightPCT*a.ResizeBasis.basisHeight/100);switch(e){case 0:n=i-g,o=r-v;break;case 1:n=g-i,o=r-v;break;case 2:n=g-i,o=v-r;break;case 3:n=i-g,o=v-r}return c.width=g,c.height=v,c.deltaX=n/l,c.deltaY=o/l,c}switch(e){case 0:c.width=u?i:i-n*l,c.height=p?r:r-o*l;break;case 1:c.width=u?i:i+n*l,c.height=p?r:r-o*l;break;case 2:c.width=u?i:i+n*l,c.height=p?r:r+o*l;break;case 3:c.width=u?i:i-n*l,c.height=p?r:r+o*l}return c},n.updateEdgePointByAnchors=function(){var t=n.nodeModel,e=t.id,o=t.anchors,i=n.getNodeEdges(e);i.sourceEdges.forEach((function(t){var e=o.find((function(e){return e.id===t.sourceAnchorId}));t.updateStartPoint({x:e.x,y:e.y})})),i.targetEdges.forEach((function(t){var e=o.find((function(e){return e.id===t.targetAnchorId}));t.updateEndPoint({x:e.x,y:e.y})}))},n.updateRect=function(t){var e=t.deltaX,o=t.deltaY,i=n.nodeModel,r=i.id,a=i.x,s=i.y,l=i.width,d=i.height,u=i.radius,h=i.PCTResizeInfo,p=n.nodeModel,c=p.minWidth,f=p.minHeight,y=p.maxWidth,g=p.maxHeight,v=n.index,m=c===y,x=f===g,b=n.getResize({index:v,deltaX:e,deltaY:o,width:l,height:d,PCTResizeInfo:h,pct:1,freezeWidth:m,freezeHeight:x});if(b.width<c||b.width>y||b.height<f||b.height>g)n.dragHandler.cancelDrag();else{n.updatePosition({deltaX:m?0:b.deltaX,deltaY:x?0:b.deltaY}),n.nodeModel.width=b.width,n.nodeModel.height=b.height,n.nodeModel.setProperties({nodeSize:{width:b.width,height:b.height}}),n.getNodeEdges(r);var w={x:a,y:s,width:l,height:d,radius:u},_={x:n.nodeModel.x,y:n.nodeModel.y,width:n.nodeModel.width,height:n.nodeModel.height,radius:u};n.updateEdgePointByAnchors(),n.eventEmit({beforeNode:w,afterNode:_})}},n.updateEllipse=function(t){var e=t.deltaX,o=t.deltaY,i=n.nodeModel,a=i.id,s=i.rx,l=i.ry,d=i.x,u=i.y,h=i.PCTResizeInfo,p=n.index,c=n.nodeModel,f=c.minWidth,y=c.minHeight,g=c.maxWidth,v=c.maxHeight,m=f===g,x=y===v,b=s,w=l,_=n.getResize({index:p,deltaX:e,deltaY:o,width:b,height:w,PCTResizeInfo:h,pct:.5,freezeWidth:m,freezeHeight:x});if(_.width<f/2||_.width>g/2||_.height<y/2||_.height>v/2)n.dragHandler.cancelDrag();else{n.updatePosition({deltaX:m?0:_.deltaX,deltaY:x?0:_.deltaY}),n.nodeModel.rx=_.width,n.nodeModel.ry=_.height,n.nodeModel.setProperties({nodeSize:{rx:_.width,ry:_.height}}),n.getNodeEdges(a);var M={x:d,y:u},E={rx:_.width,ry:_.height,x:n.nodeModel.x,y:n.nodeModel.y};n.updateEdgePointByAnchors(),n.eventEmit({beforeNode:r(r({},M),{rx:s,ry:l}),afterNode:E})}},n.updateDiamond=function(t){var e=t.deltaX,o=t.deltaY,i=n.nodeModel,r=(i.id,i.rx),a=i.ry,s=i.x,l=i.y,d=i.PCTResizeInfo,u=n.index,h=n.nodeModel,p=h.minWidth,c=h.minHeight,f=h.maxWidth,y=h.maxHeight,g=p===f,v=c===y,m=r,x=a,b=n.getResize({index:u,deltaX:e,deltaY:o,width:m,height:x,PCTResizeInfo:d,pct:.5,freezeWidth:g,freezeHeight:v});if(b.width<p/2||b.width>f/2||b.height<c/2||b.height>y/2)n.dragHandler.cancelDrag();else{n.updatePosition({deltaX:g?0:b.deltaX,deltaY:v?0:b.deltaY}),n.nodeModel.rx=b.width,n.nodeModel.ry=b.height,n.nodeModel.setProperties({nodeSize:{rx:b.width,ry:b.height}});var w={x:s,y:l,rx:r,ry:a},_={rx:b.width,ry:b.height,x:n.nodeModel.x,y:n.nodeModel.y};n.updateEdgePointByAnchors(),n.eventEmit({beforeNode:w,afterNode:_})}},n.eventEmit=function(t){var e=t.beforeNode,o=t.afterNode,i=n.nodeModel,a=i.id,s=i.modelType,l=i.type,d=r({id:a,modelType:s,type:l},e),u=r({id:a,modelType:s,type:l},o);n.graphModel.eventCenter.emit("node:resize",{oldNodeSize:d,newNodeSize:u})},n.onDragging=function(t){var e,o=t.deltaX,i=t.deltaY,r=n.graphModel.transformModel,s=n.nodeModel.modelType;o=(e=a(r.fixDeltaXY(o,i),2))[0],i=e[1],s===u.ModelType.RECT_NODE||s===u.ModelType.HTML_NODE?n.updateRect({deltaX:o,deltaY:i}):s===u.ModelType.ELLIPSE_NODE?n.updateEllipse({deltaX:o,deltaY:i}):s===u.ModelType.DIAMOND_NODE&&n.updateDiamond({deltaX:o,deltaY:i})},n.onDragEnd=function(){var t=n.graphModel.gridSize,e=void 0===t?1:t,o=e*Math.round(n.nodeModel.x/e),i=e*Math.round(n.nodeModel.y/e);n.nodeModel.moveTo(o,i),n.updateEdgePointByAnchors()},n.index=e.index,n.nodeModel=e.model,n.graphModel=e.graphModel,n.state={},n.dragHandler=new h({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:1}),n}return i(e,t),e.prototype.getNodeEdges=function(t){for(var e=this.graphModel.edges,n=[],o=[],i=0;i<e.length;i++){var r=e[i];r.sourceNodeId===t?n.push(r):e[i].targetNodeId===t&&o.push(r)}return{sourceEdges:n,targetEdges:o}},e.prototype.render=function(){var t=this.props,e=t.x,n=t.y,o=t.index,i=t.model.getControlPointStyle();return s.h("g",{className:"lf-resize-control-"+o},s.h(d.default,r({className:"lf-node-control"},{x:e,y:n},i,{onMouseDown:this.dragHandler.handleMouseDown})))},e}(s.Component);e.default=p},3257:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(59622),s=n(74836),l=n(37457),d=function(t){function e(){var e=t.call(this)||this;return e.state={},e}return i(e,t),e.prototype.getResizeControl=function(){var t=this.props,e=t.model,n=t.graphModel,o=e.x,i=e.y,l=e.width,d=e.height,u={minX:o-l/2,minY:i-d/2,maxX:o+l/2,maxY:i+d/2},h=u.minX,p=u.minY,c=u.maxX,f=u.maxY;return[{x:h,y:p},{x:c,y:p},{x:c,y:f},{x:h,y:f}].map((function(t,o){return a.h(s.default,r({index:o},t,{model:e,graphModel:n}))}))},e.prototype.getGroupSolid=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,i=t.height,s=t.getResizeOutlineStyle();return a.h(l.default,r({fill:"none"},s,{x:e,y:n,width:o,height:i}))},e.prototype.render=function(){return a.h("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},e}(a.Component);e.default=d},84217:(t,e)=>{function n(t){var e=t.x,n=t.y,o=t.width,i=t.height;return{minX:e-o/2,minY:n-i/2,maxX:e+o/2,maxY:n+i/2}}function o(t){var e=n(t),o=t.radius,i=e.minX,r=e.minY,a=e.maxX,s=e.maxY;return[{x:i+o,y:r+o},{x:a-o,y:r+o},{x:a-o,y:s-o},{x:i+o,y:s-o}]}var i;Object.defineProperty(e,"__esModule",{value:!0}),e.getDiamondResizeEdgePoint=e.getEllipseResizeEdgePoint=e.getRectResizeEdgePoint=e.ModelType=void 0,(i=e.ModelType||(e.ModelType={})).NODE="node",i.CIRCLE_NODE="circle-node",i.POLYGON_NODE="polygon-node",i.RECT_NODE="rect-node",i.HTML_NODE="html-node",i.TEXT_NODE="text-node",i.ELLIPSE_NODE="ellipse-node",i.DIAMOND_NODE="diamond-node",i.EDGE="edge",i.LINE_EDGE="line-edge",i.POLYLINE_EDGE="polyline-edge",i.BEZIER_EDGE="bezier-edge",i.GRAPH="graph",e.getRectResizeEdgePoint=function(t){var e=t.point,i=t.beforeNode,r=t.afterNode,a=e.x,s=e.y,l={x:a,y:s},d=i.radius,u=n(i),h=n(r);if(a===u.minX){l.x=h.minX;var p=(s-i.y)/(i.height/2-d);l.y=p?r.y+(r.height/2-d)*p:r.y}else if(a===u.maxX)l.x=h.maxX,p=(s-i.y)/(i.height/2-d),l.y=p?r.y+(r.height/2-d)*p:r.y;else if(s===u.minY)l.y=h.minY,p=(a-i.x)/(i.width/2-d),l.x=p?r.x+(r.width/2-d)*p:r.x;else if(s===u.maxY)l.y=h.maxY,p=(a-i.x)/(i.width/2-d),l.x=p?r.x+(r.width/2-d)*p:r.x;else{var c=o(i),f=o(r),y=n(i),g=y.minX,v=y.minY,m=y.maxX,x=y.maxY,b=-1;if(a-g<d&&s-v<d?b=0:m-a<d&&s-v<d?b=1:m-a<d&&x-s<d?b=2:a-g<d&&v-s<d&&(b=3),b>-1){var w=Math.atan2(s-c[b].y,a-c[b].x);l.x=f[b].x+d*Math.cos(w),l.y=f[b].y+d*Math.sin(w)}}return l},e.getEllipseResizeEdgePoint=function(t){var e,n,o=t.point,i=t.beforeNode,r=t.afterNode,a=r.rx,s=r.ry,l=(o.y-i.y)/(o.x-i.x),d=a,u=s;return l>=1/0?(e=0,n=u):l<=-1/0?(e=0,n=-u):o.x-i.x>0?(e=d*u/Math.sqrt(u*u+d*d*l*l),n=d*u*l/Math.sqrt(u*u+d*d*l*l)):(e=-d*u/Math.sqrt(u*u+d*d*l*l),n=-d*u*l/Math.sqrt(u*u+d*d*l*l)),{x:e+r.x,y:n+r.y}},e.getDiamondResizeEdgePoint=function(t){var e,n=t.point,o=t.beforeNode,i=t.afterNode,r=n.x-o.x,a=n.y-o.y,s=o.rx,l=o.ry,d=Math.sqrt((s-Math.abs(r))*(s-Math.abs(r))+a*a)/Math.sqrt(s*s+l*l),u=i.rx,h=i.ry,p=Math.sqrt((u*u+h*h)*d*d*(u*u/(u*u+h*h))),c=p*(h/u);return e=a>0?c:-c,{x:(r>=0?u-p:p-u)+i.x,y:e+i.y}}},14740:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(41918),s=n(3257),l=n(25097),d=function(t){function e(e,n){var o=t.call(this,e,n)||this,i=o.properties.nodeSize;return i&&(o.rx=i.rx,o.ry=i.ry),o}return i(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return this.graphModel.editConfigModel.isSilentMode||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={basisWidth:this.rx,basisHeight:this.ry},n={maxScaleLimit:Math.min(this.maxWidth/(2*this.rx)*100,this.maxHeight/(2*this.ry)*100),minScaleLimit:Math.max(this.minWidth/(2*this.rx)*100,this.minHeight/(2*this.ry)*100)};this.PCTResizeInfo={ResizePCT:{widthPCT:100,hightPCT:100},ResizeBasis:e,ScaleLimit:n}}else delete this.PCTResizeInfo},e}(a.DiamondNodeModel),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return a.h(s.default,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){var t=this.props.model,e=t.points,n=t.getNodeStyle();return a.h("g",null,a.h(l.default,r({},n,{points:e})))},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,n=t.graphModel.editConfigModel.isSilentMode;return a.h("g",null,this.getResizeShape(),e&&!n?this.getControlGroup():"")},e}(a.DiamondNode),h={type:"diamond",view:u,model:d};e.default=h},39582:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(41918),a=n(3257),s=function(t){function e(e,n){var o=t.call(this,e,n)||this,i=o.properties.nodeSize;return i&&(o.rx=i.rx,o.ry=i.ry),o}return i(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return this.graphModel.editConfigModel.isSilentMode||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={basisWidth:this.rx,basisHeight:this.ry},n={maxScaleLimit:Math.min(this.maxWidth/(2*this.rx)*100,this.maxHeight/(2*this.ry)*100),minScaleLimit:Math.max(this.minWidth/(2*this.rx)*100,this.minHeight/(2*this.ry)*100)};this.PCTResizeInfo={ResizePCT:{widthPCT:100,hightPCT:100},ResizeBasis:e,ScaleLimit:n}}else delete this.PCTResizeInfo},e}(r.EllipseNodeModel),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return r.h(a.default,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model,n=t.graphModel.editConfigModel.isSilentMode;return r.h("g",null,this.getResizeShape(),e.isSelected&&!n?this.getControlGroup():"")},e}(r.EllipseNode),d={type:"ellipse",view:l,model:s};e.default=d},66263:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(41918),a=n(3257),s=function(t){function e(e,n){var o=t.call(this,e,n)||this,i=o.properties.nodeSize;return i&&(o.width=i.width,o.height=i.height),o}return i(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return this.graphModel.editConfigModel.isSilentMode||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={basisWidth:this.width,basisHeight:this.height},n={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:{widthPCT:100,hightPCT:100},ResizeBasis:e,ScaleLimit:n}}else delete this.PCTResizeInfo},e}(r.HtmlNodeModel),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return r.h(a.default,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,n=t.graphModel.editConfigModel.isSilentMode;return r.h("g",null,this.getResizeShape(),e&&!n?this.getControlGroup():"")},e}(r.HtmlNode),d={type:"html",view:l,model:s};e.default=d},5588:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(41918),a=n(3257),s=function(t){function e(e,n){var o=t.call(this,e,n)||this,i=o.properties.nodeSize;return i&&(o.width=i.width,o.height=i.height),o}return i(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return this.graphModel.editConfigModel.isSilentMode||(e.stroke="none",e.hover&&(e.hover.stroke="none")),e},e.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},e.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},e.prototype.resize=function(t,e){console.log(t,e)},e.prototype.enableProportionResize=function(t){if(void 0===t&&(t=!0),t){var e={basisWidth:this.width,basisHeight:this.height},n={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:{widthPCT:100,hightPCT:100},ResizeBasis:e,ScaleLimit:n}}else delete this.PCTResizeInfo},e}(r.RectNodeModel),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getControlGroup=function(){var t=this.props,e=t.model,n=t.graphModel;return r.h(a.default,{model:e,graphModel:n})},e.prototype.getResizeShape=function(){return t.prototype.getShape.call(this)},e.prototype.getShape=function(){var t=this.props,e=t.model.isSelected,n=t.graphModel.editConfigModel.isSilentMode;return r.h("g",null,this.getResizeShape(),e&&!n?this.getControlGroup():"")},e}(r.RectNode),d={type:"rect",view:l,model:s};e.default=d},87023:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HtmlResize=e.DiamondResize=e.EllipseResize=e.RectResize=e.NodeResize=void 0;var o=n(5588);e.RectResize=o.default;var i=n(39582);e.EllipseResize=i.default;var r=n(14740);e.DiamondResize=r.default;var a=n(66263);e.HtmlResize=a.default;var s={pluginName:"nodeResize",step:0,install:function(t){t.register({type:o.default.type,view:o.default.view,model:o.default.model}),t.register({type:i.default.type,view:i.default.view,model:i.default.model}),t.register({type:r.default.type,view:r.default.view,model:r.default.model}),t.register({type:a.default.type,view:a.default.view,model:a.default.model})}};e.NodeResize=s,e.default=s},90037:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBpmnId=void 0;var n=function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},t.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},t}(),o=(null===globalThis||void 0===globalThis?void 0:globalThis._ids)||new n;e.getBpmnId=function(){return o.next()}},7072:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.toNormalJson=e.toXmlJson=e.BpmnXmlAdapter=e.BpmnAdapter=void 0;var s,l=n(90037),d=n(97063),u=n(25145),h=n(69548);!function(t){t.START="bpmn:startEvent",t.END="bpmn:endEvent",t.GATEWAY="bpmn:exclusiveGateway",t.USER="bpmn:userTask",t.SYSTEM="bpmn:serviceTask",t.FLOW="bpmn:sequenceFlow"}(s||(s={}));var p=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],c=["properties","startPoint","endPoint","pointsList"];function f(t){var e=t?c.concat(t):c;return function(t){return function t(n){var o={};return"string"==typeof n?n:Array.isArray(n)?n.map((function(e){return t(e)})):(Object.entries(n).forEach((function(n){var i=a(n,2),r=i[0],s=i[1];"object"!=typeof s?0===r.indexOf("-")||["#text","#cdata-section","#comment"].includes(r)?o[r]=s:o["-"+r]=s:e.includes(r)?o["-"+r]=t(s):o[r]=t(s)})),o)}(t)}}function y(t){var e={};return Object.entries(t).forEach((function(t){var n=a(t,2),o=n[0],i=n[1];0===o.indexOf("-")?e[o.substring(1)]=d.handleAttributes(i):"string"==typeof i?e[o]=i:"[object Object]"===Object.prototype.toString.call(i)?e[o]=y(i):Array.isArray(i)?e[o]=i.map((function(t){return y(t)})):e[o]=i})),e}function g(t,e){t["bpmndi:BPMNEdge"]=e.edges.map((function(t){var e,n=t.id,o=t.pointsList.map((function(t){return{"-x":t.x,"-y":t.y}})),i={"-id":n+"_di","-bpmnElement":n,"di:waypoint":o};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(i["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),i})),t["bpmndi:BPMNShape"]=e.nodes.map((function(t){var e,n=t.id,o=100,i=80,r=t.x,a=t.y,s=x.shapeConfigMap.get(t.type);s&&(o=s.width,i=s.height);var l={"-id":n+"_di","-bpmnElement":n,"dc:Bounds":{"-x":r-=o/2,"-y":a-=i/2,"-width":o,"-height":i}};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(l["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),l}))}function v(t,e,n){var o,i,r=Number(t["dc:Bounds"]["-x"]),s=Number(t["dc:Bounds"]["-y"]),l=n["-name"],d=x.shapeConfigMap.get(e);if(d&&(r+=d.width/2,s+=d.height/2),Object.entries(n).forEach((function(t){var e=a(t,2),n=e[0],i=e[1];-1===p.indexOf(n)&&(o||(o={}),o[n]=i)})),o&&(o=y(o)),l&&(i={x:r,y:s,value:l},t["bpmndi:BPMNLabel"]&&t["bpmndi:BPMNLabel"]["dc:Bounds"])){var u=t["bpmndi:BPMNLabel"]["dc:Bounds"];i.x=Number(u["-x"])+Number(u["-width"])/2,i.y=Number(u["-y"])+Number(u["-height"])/2}var h={id:t["-bpmnElement"],type:e,x:r,y:s,properties:o};return i&&(h.text=i),h}function m(t,e){var n,o,i=e["-name"];if(i){var r=t["bpmndi:BPMNLabel"]["dc:Bounds"],l=0;i.split("\n").forEach((function(t){l<t.length&&(l=t.length)})),n={value:i,x:Number(r["-x"])+10*l/2,y:Number(r["-y"])+7}}Object.entries(e).forEach((function(t){var e=a(t,2),n=e[0],i=e[1];-1===p.indexOf(n)&&(o||(o={}),o[n]=i)})),o&&(o=y(o));var d={id:e["-id"],type:s.FLOW,pointsList:t["di:waypoint"].map((function(t){return{x:Number(t["-x"]),y:Number(t["-y"])}})),sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:o};return n&&(d.text=n),d}e.toXmlJson=f,e.toNormalJson=y;var x=function(){function t(t){var e=this,n=t.lf;this.adapterOut=function(t,n){var o=r({},e.processAttributes);!function(t,e,n){var o=new Map;e.nodes.forEach((function(e){var i,r={"-id":e.id};if((null===(i=e.text)||void 0===i?void 0:i.value)&&(r["-name"]=e.text.value),e.properties){var a=f(n)(e.properties);Object.assign(r,a)}o.set(e.id,r),t[e.type]?Array.isArray(t[e.type])?t[e.type].push(r):t[e.type]=[t[e.type],r]:t[e.type]=r}));var i=e.edges.map((function(t){var e,i,r=o.get(t.targetNodeId);r["bpmn:incoming"]?Array.isArray(r["bpmn:incoming"])?r["bpmn:incoming"].push(t.id):r["bpmn:incoming"]=[r["bpmn:incoming"],t.id]:r["bpmn:incoming"]=t.id;var a={"-id":t.id,"-sourceRef":t.sourceNodeId,"-targetRef":t.targetNodeId};if((null===(e=t.text)||void 0===e?void 0:e.value)&&(a["-name"]=null===(i=t.text)||void 0===i?void 0:i.value),t.properties){var s=f(n)(t.properties);Object.assign(a,s)}return a}));e.edges.forEach((function(t){var e=o.get(t.sourceNodeId);e["bpmn:outgoing"]?Array.isArray(e["bpmn:outgoing"])?e["bpmn:outgoing"].push(t.id):e["bpmn:outgoing"]=[e["bpmn:outgoing"],t.id]:e["bpmn:outgoing"]=t.id})),t[s.FLOW]=i}(o,t,n);var i={"-id":"BPMNPlane_1","-bpmnElement":o["-id"]};g(i,t);var a=e.definitionAttributes;return a["bpmn:process"]=o,a["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":i},{"bpmn:definitions":a}},this.adapterIn=function(t){if(t)return function(t){var e=[],n=[],o=t["bpmn:definitions"];if(o){var i=o["bpmn:process"];Object.keys(i).forEach((function(t){if(0===t.indexOf("bpmn:")){var r=i[t];if(t===s.FLOW){var a=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=function(t,e){var n,o=[];Array.isArray(t)?t.forEach((function(t){var n;n=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,o.push(m(n,t))})):(n=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,o.push(m(n,t)));return o}(r,a)}else{var l=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];e=e.concat(function(t,e,n){var o=[];if(Array.isArray(t))t.forEach((function(t){var i=v(Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n,t);o.push(i)}));else{var i=v(Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n,t);o.push(i)}return o}(r,l,t))}}}))}return{nodes:e,edges:n}}(t)},n.adapterIn=function(t){return e.adapterIn(t)},n.adapterOut=function(t,n){return e.adapterOut(t,n)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+l.getBpmnId()},this.definitionAttributes={"-id":"Definitions_"+l.getBpmnId(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return t.prototype.setCustomShape=function(e,n){t.shapeConfigMap.set(e,n)},t.pluginName="bpmn-adapter",t.shapeConfigMap=new Map,t}();e.BpmnAdapter=x,x.shapeConfigMap.set(s.START,{width:h.StartEventConfig.width,height:h.StartEventConfig.height}),x.shapeConfigMap.set(s.END,{width:h.EndEventConfig.width,height:h.EndEventConfig.height}),x.shapeConfigMap.set(s.GATEWAY,{width:h.ExclusiveGatewayConfig.width,height:h.ExclusiveGatewayConfig.height}),x.shapeConfigMap.set(s.SYSTEM,{width:h.ServiceTaskConfig.width,height:h.ServiceTaskConfig.height}),x.shapeConfigMap.set(s.USER,{width:h.UserTaskConfig.width,height:h.UserTaskConfig.height});var b=function(t){function e(e){var n=t.call(this,e)||this;n.adapterXmlIn=function(t){var e=u.lfXml2Json(t);return n.adapterIn(e)},n.adapterXmlOut=function(t,e){var o=n.adapterOut(t,e);return d.lfJson2Xml(o)};var o=e.lf;return o.adapterIn=n.adapterXmlIn,o.adapterOut=n.adapterXmlOut,n}return i(e,t),e.pluginName="bpmnXmlAdapter",e}(x);e.BpmnXmlAdapter=b,e.default=x},97063:(t,e)=>{function n(t){return Object.prototype.toString.call(t)}function o(t){var e=t;return"[object Object]"===n(t)?(e={},Object.keys(t).forEach((function(n){var i=n;"-"===n.charAt(0)&&(i=n.substring(1)),e[i]=o(t[n])}))):Array.isArray(t)&&(e=[],t.forEach((function(t,n){e[n]=o(t)}))),e}Object.defineProperty(e,"__esModule",{value:!0}),e.handleAttributes=e.lfJson2Xml=void 0,e.handleAttributes=o;var i="\t\n";function r(t,e,a){var s=function(t){return"  ".repeat(t)}(a),l="";if("#text"===e)return i+s+t;if("#cdata-section"===e)return i+s+"<![CDATA["+t+"]]>";if("#comment"===e)return i+s+"\x3c!--"+t+"--\x3e";if("-"===(""+e).charAt(0))return" "+e.substring(1)+'="'+function(t){var e=t;try{"string"!=typeof e&&(e=JSON.parse(t))}catch(n){e=JSON.stringify(o(t)).replace(/"/g,"'")}return e}(t)+'"';if(Array.isArray(t))t.forEach((function(t){l+=r(t,e,a+1)}));else if("[object Object]"===n(t)){var d=Object.keys(t),u="",h="";l+=(0===a?"":i+s)+"<"+e,d.forEach((function(e){"-"===e.charAt(0)?u+=r(t[e],e,a+1):h+=r(t[e],e,a+1)})),l+=u+(""!==h?">"+h+(i+s)+"</"+e+">":" />")}else l+=i+s+"<"+e+">"+t.toString()+"</"+e+">";return l}e.lfJson2Xml=function(t){var e="";for(var n in t)e+=r(t[n],n,0);return e}},25145:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.lfXml2Json=void 0;var n=function(){};(n.ObjTree=function(){return this}).VERSION="0.23",n.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',n.ObjTree.prototype.attr_prefix="-",n.ObjTree.prototype.parseXML=function(t){var e;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(t,"application/xml");if(!o)return;e=o.documentElement}else window.ActiveXObject&&((n=new ActiveXObject("Microsoft.XMLDOM")).async=!1,n.loadXML(t),e=n.documentElement);if(e)return this.parseDOM(e)},n.ObjTree.prototype.parseHTTP=function(t,e,n){var o,i={};for(var r in e)i[r]=e[r];if(i.method||(void 0===i.postBody&&void 0===i.postbody&&void 0===i.parameters?i.method="get":i.method="post"),n){i.asynchronous=!0;var a=this,s=n,l=i.onComplete;i.onComplete=function(t){var e;t&&t.responseXML&&t.responseXML.documentElement&&(e=a.parseDOM(t.responseXML.documentElement)),s(e,t),l&&l(t)}}else i.asynchronous=!1;if("undefined"!=typeof HTTP&&HTTP.Request)i.uri=t,(d=new HTTP.Request(i))&&(o=d.transport);else if("undefined"!=typeof Ajax&&Ajax.Request){var d;(d=new Ajax.Request(t,i))&&(o=d.transport)}return n?o:o&&o.responseXML&&o.responseXML.documentElement?this.parseDOM(o.responseXML.documentElement):void 0},n.ObjTree.prototype.parseDOM=function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),11!=t.nodeType){var o={};o[t.nodeName]=n,n=o}return n}},n.ObjTree.prototype.parseElement=function(t){if(7!=t.nodeType){if(3==t.nodeType||4==t.nodeType||8==t.nodeType){if(null==t.nodeValue.match(/[^\x00-\x20]/))return;return t.nodeValue}var e=null,n={};if(t.attributes&&t.attributes.length){e={};for(var o=0;o<t.attributes.length;o++)if("string"==typeof(s=t.attributes[o].nodeName)){var i=t.attributes[o].nodeValue;try{i=JSON.parse(t.attributes[o].nodeValue.replace(/'/g,'"'))}catch(e){i=t.attributes[o].nodeValue}i&&(void 0===n[s=this.attr_prefix+s]&&(n[s]=0),n[s]++,this.addNode(e,s,n[s],i))}}if(t.childNodes&&t.childNodes.length){var r=!0;for(e&&(r=!1),o=0;o<t.childNodes.length&&r;o++){var a=t.childNodes[o].nodeType;3!=a&&4!=a&&8!=a&&(r=!1)}if(r)for(e||(e=""),o=0;o<t.childNodes.length;o++)e+=t.childNodes[o].nodeValue;else for(e||(e={}),o=0;o<t.childNodes.length;o++){var s;"string"==typeof(s=t.childNodes[o].nodeName)&&(i=this.parseElement(t.childNodes[o]))&&(void 0===n[s]&&(n[s]=0),n[s]++,this.addNode(e,s,n[s],i))}}else null===e&&(e={});return e}},n.ObjTree.prototype.addNode=function(t,e,n,o){this.__force_array[e]?(1==n&&(t[e]=[]),t[e][t[e].length]=o):1==n?t[e]=o:2==n?t[e]=[t[e],o]:t[e][t[e].length]=o},n.ObjTree.prototype.writeXML=function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e},n.ObjTree.prototype.hash_to_xml=function(t,e){var n=[],o=[];for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];i.charAt(0)!=this.attr_prefix?void 0===r||null==r?n[n.length]="<"+i+" />":"object"==typeof r&&r.constructor==Array?n[n.length]=this.array_to_xml(i,r):n[n.length]="object"==typeof r?this.hash_to_xml(i,r):this.scalar_to_xml(i,r):o[o.length]=" "+i.substring(1)+'="'+this.xml_escape(r)+'"'}var a=o.join(""),s=n.join("");return void 0===t||null==t||(s=n.length>0?s.match(/\n/)?"<"+t+a+">\n"+s+"</"+t+">\n":"<"+t+a+">"+s+"</"+t+">\n":"<"+t+a+" />\n"),s},n.ObjTree.prototype.array_to_xml=function(t,e){for(var n=[],o=0;o<e.length;o++){var i=e[o];void 0===i||null==i?n[n.length]="<"+t+" />":"object"==typeof i&&i.constructor==Array?n[n.length]=this.array_to_xml(t,i):n[n.length]="object"==typeof i?this.hash_to_xml(t,i):this.scalar_to_xml(t,i)}return n.join("")},n.ObjTree.prototype.scalar_to_xml=function(t,e){return"#text"==t?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+">\n"},n.ObjTree.prototype.xml_escape=function(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')},e.lfXml2Json=function(t){return(new n.ObjTree).parseXML(t)}},78732:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.theme=e.SubProcessConfig=e.UserTaskConfig=e.ServiceTaskConfig=e.ExclusiveGatewayConfig=e.InclusiveGatewayConfig=e.ParallelGatewayConfig=e.IntermediateEventConfig=e.BoundaryEventConfig=e.EndEventConfig=e.StartEventConfig=void 0,e.StartEventConfig={width:40,height:40},e.EndEventConfig={width:40,height:40},e.BoundaryEventConfig={width:100,height:80},e.IntermediateEventConfig={width:100,height:80},e.ParallelGatewayConfig={width:100,height:80},e.InclusiveGatewayConfig={width:100,height:80},e.ExclusiveGatewayConfig={width:100,height:80},e.ServiceTaskConfig={width:100,height:80},e.UserTaskConfig={width:100,height:80},e.SubProcessConfig={width:100,height:80},e.theme={rect:{radius:5,stroke:"rgb(24, 125, 255)"},circle:{r:18,stroke:"rgb(24, 125, 255)"},polygon:{stroke:"rgb(24, 125, 255)"},polyline:{stroke:"rgb(24, 125, 255)",hoverStroke:"rgb(24, 125, 255)",selectedStroke:"rgb(24, 125, 255)"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}}}},26130:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},a=this&&this.__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},d=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.convertXmlToNormal=e.convertNormalToXml=e.BPMNAdapter=e.BPMNBaseAdapter=void 0;var u,h=n(47699),p=n(78732),c=n(63815),f=n(75365);!function(t){t.START="bpmn:startEvent",t.END="bpmn:endEvent",t.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",t.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",t.BOUNDARY="bpmn:boundaryEvent",t.PARALLEL_GATEWAY="bpmn:parallelGateway",t.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",t.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",t.USER="bpmn:userTask",t.SYSTEM="bpmn:serviceTask",t.FLOW="bpmn:sequenceFlow",t.SUBPROCESS="bpmn:subProcess"}(u||(u={}));var y=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],g=["properties","startPoint","endPoint","pointsList"],v=[],m=["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"],x=function(t,e){return Object.keys(e||{}).forEach((function(n){if(t[n]){var o=e[n],i=o.in,r=o.out;i&&(t[n].in=i),r&&(t[n].out=r)}else t[n]=e[n]})),t},b={"bpmn:startEvent":{out:function(t){var e,n,o=t.properties;return(null===(n=null===(e=b[o.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:intermediateCatchEvent":{out:function(t){var e,n,o=t.properties;return(null===(n=null===(e=b[o.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:intermediateThrowEvent":{out:function(t){var e,n,o=t.properties;return(null===(n=null===(e=b[o.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:boundaryEvent":{out:function(t){var e,n,o=t.properties;return(null===(n=null===(e=b[o.definitionType])||void 0===e?void 0:e.out)||void 0===n?void 0:n.call(e,t))||{}}},"bpmn:sequenceFlow":{out:function(t){var e=t.properties,n=e.expressionType,o=e.condition;return o?"cdata"===n?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+o+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+o+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(t){var e=t.properties,n=e.timerType,o=e.timerValue;return{json:'<bpmn:timerEventDefinition id="'+e.definitionId+'"'+(n&&o?"><bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+o+"</bpmn:"+n+"></bpmn:timerEventDefinition>":"/>")}},in:function(t,e){var n,o,i,r=t,a=e["-id"],d="",u="";try{for(var h=s(Object.keys(e)),p=h.next();!p.done;p=h.next()){var c=p.value;c.includes("bpmn:")&&(d=l(c.split(":"),2)[1],u=null===(i=e[c])||void 0===i?void 0:i["#text"])}}catch(t){n={error:t}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}return{"-definitionId":a,"-definitionType":r,"-timerType":d,"-timerValue":u}}},"bpmn:conditionExpression":{in:function(t,e){var n,o="",i="";return e["#cdata-section"]?(i="cdata",o=(null===(n=/^\$\{(.*)\}$/g.exec(e["#cdata-section"]))||void 0===n?void 0:n[1])||""):e["#text"]&&(i="normal",o=e["#text"]),{"-condition":o,"-expressionType":i}}}};function w(t){var e=null!=t?t:{},n=e.retainedAttrsFields,o=e.excludeFields,i=e.transformer,r=new Set(d(g,n||[])),a={in:new Set(d(v,(null==o?void 0:o.in)||[])),out:new Set(d(m,(null==o?void 0:o.out)||[]))};return b=x(b,i),function(t){var e=t.nodes,n=t.edges;return function t(o,i){var d,u,h;if(1!==(null==o?void 0:o.flag)){var p;if((p=b[o.type])&&p.out){var c=p.out(o),f=Object.keys(c);f.length>0&&f.forEach((function(t){o[t]=c[t]}))}(null==o?void 0:o.children)&&(o.children=o.children.map((function(t){return e.find((function(e){return e.id===t}))||n.find((function(e){return e.id===t}))||{}})));var y={};if("string"==typeof o)return o;if(Array.isArray(o))return o.map((function(e){return t(e,"")})).filter((function(t){return null!=t}));try{for(var g=s(Object.entries(o)),v=g.next();!v.done;v=g.next()){var m=l(v.value,2),x=m[0],w=m[1];if(1===(null===(h=w)||void 0===h?void 0:h.flag))return;var _=[i,x].filter((function(t){return t})).join(".");a.out.has(_)||("object"!=typeof w?0===x.indexOf("-")||["#text","#cdata-section","#comment"].includes(x)?y[x]=w:y["-"+x]=w:r.has(_)?y["-"+x]=t(w,_):y[x]=t(w,_))}}catch(t){d={error:t}}finally{try{v&&!v.done&&(u=g.return)&&u.call(g)}finally{if(d)throw d.error}}return y}}(t,"")}}function _(t){var e,n,o={};try{for(var i=s(Object.entries(t)),r=i.next();!r.done;r=i.next()){var a=l(r.value,2),d=a[0],u=a[1];0===d.indexOf("-")?o[d.substring(1)]=f.handleAttributes(u):"string"==typeof u?o[d]=u:"[object Object]"===Object.prototype.toString.call(u)?o[d]=_(u):Array.isArray(u)?o[d]=u.map((function(t){return _(t)})):o[d]=u}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return o}function M(t,e){t["bpmndi:BPMNEdge"]=e.edges.map((function(t){var e,n=t.id,o=t.pointsList.map((function(t){return{"-x":t.x,"-y":t.y}})),i={"-id":n+"_di","-bpmnElement":n,"di:waypoint":o};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(i["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),i})),t["bpmndi:BPMNShape"]=e.nodes.map((function(t){var e,n=t.id,o=100,i=80,r=t.x,a=t.y,s=N.shapeConfigMap.get(t.type);s&&(o=s.width,i=s.height);var l={"-id":n+"_di","-bpmnElement":n,"dc:Bounds":{"-x":r-=o/2,"-y":a-=i/2,"-width":o,"-height":i}};return(null===(e=t.text)||void 0===e?void 0:e.value)&&(l["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-10*t.text.value.length/2,"-y":t.text.y-7,"-width":10*t.text.value.length,"-height":14}}),l}))}e.convertNormalToXml=w,e.convertXmlToNormal=_;var E=["bpmn:incoming","bpmn:outgoing"];function P(t,e,n){var o=Number(t["dc:Bounds"]["-x"]),i=Number(t["dc:Bounds"]["-y"]),r=n["-children"],a=n["-name"],s=N.shapeConfigMap.get(e);s&&(o+=s.width/2,i+=s.height/2);var d,u={};if(Object.entries(n).forEach((function(t){var e=l(t,2),n=e[0],o=e[1];y.includes(n)||(u[n]=o)})),u=_(u),a&&(d={x:o,y:i,value:a},t["bpmndi:BPMNLabel"]&&t["bpmndi:BPMNLabel"]["dc:Bounds"])){var h=t["bpmndi:BPMNLabel"]["dc:Bounds"];d.x=Number(h["-x"])+Number(h["-width"])/2,d.y=Number(h["-y"])+Number(h["-height"])/2}var p={id:t["-bpmnElement"],type:e,x:o,y:i,properties:u};return r&&(p.children=r),d&&(p.text=d),p}function O(t,e){var n,o=e["-name"];if(o){var i=t["bpmndi:BPMNLabel"]["dc:Bounds"],r=0;o.split("\n").forEach((function(t){r<t.length&&(r=t.length)})),n={value:o,x:Number(i["-x"])+10*r/2,y:Number(i["-y"])+7}}var a={};Object.entries(e).forEach((function(t){var e=l(t,2),n=e[0],o=e[1];y.includes(n)||(a[n]=o)})),a=_(a);var s=t["di:waypoint"].map((function(t){return{x:Number(t["-x"]),y:Number(t["-y"])}})),d={id:e["-id"],type:u.FLOW,pointsList:s,sourceNodeId:e["-sourceRef"],targetNodeId:e["-targetRef"],properties:a};return n&&(d.text=n),d}var N=function(){function t(t){var e=this,n=t.lf;this.adapterOut=function(t,n){var o,i,s=r({},e.processAttributes);!function(t,e,n){var o,i=new Map,r=w(n)(e);r.nodes.forEach((function(e){var n=e["-id"],o=e["-type"],r=e.text,s=e.children,l=a(e,["-id","-type","text","children"]),d={"-id":n};(null==r?void 0:r["-value"])&&(d["-name"]=r["-value"]),l["-json"]&&(d["-json"]=l["-json"]),l["-properties"]&&Object.assign(d,l["-properties"]),s&&(d.children=s),t[o]||(t[o]=[]),t[o].push(d),i.set(n,d)}));var s=r.edges.map((function(t){var e=t["-id"],n=(t["-type"],t["-sourceNodeId"]),o=t["-targetNodeId"],r=t.text,s=a(t,["-id","-type","-sourceNodeId","-targetNodeId","text"]),l=i.get(o);l["bpmn:incoming"]||(l["bpmn:incoming"]=[]),l["bpmn:incoming"].push(e);var d={"-id":e,"-sourceRef":n,"-targetRef":o};return(null==r?void 0:r["-value"])&&(d["-name"]=r["-value"]),s["-json"]&&(d["-json"]=s["-json"]),s["-properties"]&&Object.assign(d,s["-properties"]),d}));e.edges.forEach((function(t){var e=t.sourceNodeId,n=t.id,o=i.get(e);o["bpmn:outgoing"]||(o["bpmn:outgoing"]=[]),o["bpmn:outgoing"].push(n)})),null===(o=t["bpmn:subProcess"])||void 0===o||o.forEach((function(e){var n={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},o=[];e.children.forEach((function(o){var r,a=i.get(o["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach((function(t){a[t]&&a[t].forEach((function(e){n[t].add(e)}))}));var s=null===(r=t[o["-type"]])||void 0===r?void 0:r.findIndex((function(t){return t["-id"]===o["-id"]}));s>=0&&t[o["-type"]].splice(s,1),i.delete(o["-id"]),e[o["-type"]]||(e[o["-type"]]=[]),e[o["-type"]].push(a)}));var r=n["bpmn:incoming"];n["bpmn:outgoing"].forEach((function(t){r.has(t)&&o.push(t)}));for(var a,l=function(t){var n=s.findIndex((function(e){return e["-id"]===o[t]}));n>=0?(e["bpmn:sequenceFlow"]||(e["bpmn:sequenceFlow"]=[]),e["bpmn:sequenceFlow"].push(s[n]),s.splice(n,1)):t++,a=t},d=0;d<o.length;)l(d),d=a;delete e.children})),t[u.FLOW]=s}(s,t,n);var l={"-id":"BPMNPlane_1","-bpmnElement":s["-id"]};M(l,t);var d=e.definitionAttributes;d["bpmn:process"]=s,d["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":l};var p={"bpmn:definitions":d};if(null===(o=null==n?void 0:n.mapping)||void 0===o?void 0:o.out){var c=null===(i=null==n?void 0:n.mapping)||void 0===i?void 0:i.out,f=function(t){Array.isArray(t)&&t.forEach((function(t){return f(t)})),"object"==typeof t&&Object.keys(t).forEach((function(e){var n;(n=c[e])?(t[n]=h.default.cloneDeep(t[e]),delete t[e],f(t[n])):f(t[e])}))};f(p)}return p},this.adapterIn=function(t,e){if(t)return function(t,e){var n=[],o=[],i=new Map,r=null!=e?e:{},a=r.transformer,s=r.excludeFields,l={in:new Set(d(v,(null==s?void 0:s.in)||[])),out:new Set(d(m,(null==s?void 0:s.out)||[]))};b=x(b,a);var u,p,c=t["bpmn:definitions"];if(c){var f=c["bpmn:process"];u=f,p=[function(t){function e(t){t["-children"]||(t["-children"]=[]),Object.keys(t).forEach((function(e){var n;0!==e.indexOf("bpmn:")||E.includes(e)||(f[e]||(f[e]=[]),!Array.isArray(f[e])&&(f[e]=[f[e]]),Array.isArray(t[e])?(n=f[e]).push.apply(n,d(t[e])):f[e].push(t[e]),Array.isArray(t[e])?t[e].forEach((function(n){!e.includes("Flow")&&t["-children"].push(n["-id"])})):!e.includes("Flow")&&t["-children"].push(t[e]["-id"]),delete t[e])}))}if("bpmn:subProcess"===t){var n=f[t];Array.isArray(n)?n.forEach((function(n){"bpmn:subProcess"===t&&e(n)})):e(n)}},function(t){!function t(e){var n;i.set(e["-id"],e),Array.isArray(e)?e.forEach((function(e){t(e)})):"object"==typeof e&&(n=e,Object.keys(n).forEach((function(e){var o,i;if(e.includes("bpmn:")){var r={};b[e]&&b[e].in?(r=null===(i=(o=b[e]).in)||void 0===i?void 0:i.call(o,e,h.default.cloneDeep(n[e])),delete n[e]):t(n[e]);var a=void 0;(a=Reflect.ownKeys(r)).length>0&&a.forEach((function(t){Reflect.set(n,t,r[t])}))}})))}(f[t])},function(t){if(0===t.indexOf("bpmn:")){var e=f[t];if("bpmn:sequenceFlow"===t){var r=c["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];o=function(t,e){var n,o=[];Array.isArray(t)?t.forEach((function(t){var n;n=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,o.push(O(n,t))})):(n=Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,o.push(O(n,t)));return o}(e,r)}else{var a=c["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if("bpmn:boundaryEvent"===t){var s=f[t],l=function(t){var e=t["-attachedToRef"],n=i.get(e);n["-boundaryEvents"]||(n["-boundaryEvents"]=[]),n["-boundaryEvents"].push(t["-id"])};Array.isArray(s)?s.forEach((function(t){l(t)})):l(s)}n=n.concat(function(t,e,n){var o=[];if(Array.isArray(t))t.forEach((function(t){var i=P(Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n,t);o.push(i)}));else{var i=P(Array.isArray(e)?e.find((function(e){return e["-bpmnElement"]===t["-id"]})):e,n,t);o.push(i)}return o}(e,a,t))}}}],p.forEach((function(t){try{Object.keys(u).forEach((function(e){try{t(e)}catch(t){console.error(t)}}))}catch(t){console.error(t)}}))}var y=function(t,e,n){Object.keys(t).forEach((function(o){var i=n?n+"."+o:o;e.has(i)?delete t[o]:"object"==typeof t[o]&&y(t[o],e,i)}))};return n.forEach((function(t){var n,o;if(null===(n=null==e?void 0:e.mapping)||void 0===n?void 0:n.in){var i=null===(o=null==e?void 0:e.mapping)||void 0===o?void 0:o.in,r=t.type;i[r]&&(t.type=i[r])}y(t,l.in,"")})),o.forEach((function(t){var n,o;if(null===(n=null==e?void 0:e.mapping)||void 0===n?void 0:n.in){var i=null===(o=null==e?void 0:e.mapping)||void 0===o?void 0:o.in,r=t.type;i[r]&&(t.type=i[r])}y(t,l.in,"")})),{nodes:n,edges:o}}(t,e)},n.adapterIn=this.adapterIn,n.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return t.prototype.setCustomShape=function(e,n){t.shapeConfigMap.set(e,n)},t.pluginName="bpmn-adapter",t.shapeConfigMap=new Map,t}();e.BPMNBaseAdapter=N,N.shapeConfigMap.set(u.START,{width:p.StartEventConfig.width,height:p.StartEventConfig.height}),N.shapeConfigMap.set(u.END,{width:p.EndEventConfig.width,height:p.EndEventConfig.height}),N.shapeConfigMap.set(u.INTERMEDIATE_CATCH,{width:p.IntermediateEventConfig.width,height:p.IntermediateEventConfig.height}),N.shapeConfigMap.set(u.INTERMEDIATE_THROW,{width:p.IntermediateEventConfig.width,height:p.IntermediateEventConfig.height}),N.shapeConfigMap.set(u.BOUNDARY,{width:p.BoundaryEventConfig.width,height:p.BoundaryEventConfig.height}),N.shapeConfigMap.set(u.PARALLEL_GATEWAY,{width:p.ParallelGatewayConfig.width,height:p.ParallelGatewayConfig.height}),N.shapeConfigMap.set(u.INCLUSIVE_GATEWAY,{width:p.InclusiveGatewayConfig.width,height:p.InclusiveGatewayConfig.height}),N.shapeConfigMap.set(u.EXCLUSIVE_GATEWAY,{width:p.ExclusiveGatewayConfig.width,height:p.ExclusiveGatewayConfig.height}),N.shapeConfigMap.set(u.SYSTEM,{width:p.ServiceTaskConfig.width,height:p.ServiceTaskConfig.height}),N.shapeConfigMap.set(u.USER,{width:p.UserTaskConfig.width,height:p.UserTaskConfig.height}),N.shapeConfigMap.set(u.SUBPROCESS,{width:p.SubProcessConfig.width,height:p.SubProcessConfig.height});var S=function(t){function e(e){var n=t.call(this,e)||this;n.adapterXmlIn=function(t){var e=c.lfXml2Json(t);return n.adapterIn(e,n.props)},n.adapterXmlOut=function(t){var e=n.adapterOut(t,n.props);return f.lfJson2Xml(e)};var o=e.lf,i=e.props;return o.adapterIn=n.adapterXmlIn,o.adapterOut=n.adapterXmlOut,n.props=i,n}return i(e,t),e.pluginName="BPMNAdapter",e}(N);e.BPMNAdapter=S,e.default=S},75365:(t,e)=>{function n(t){return Object.prototype.toString.call(t)}function o(t){return"  ".repeat(t)}function i(t){return"[object Object]"===n(t)?Object.keys(t).reduce((function(e,n){var o=n;return"-"===n.charAt(0)&&(o=n.substring(1)),e[o]=i(t[n]),e}),{}):Array.isArray(t)?t.map((function(t){return i(t)})):t}function r(t,e,a){var s="",l="\t\n"+o(a);if("-json"===e)return"";if("#text"===e)return l+t;if("#cdata-section"===e)return l+"<![CDATA["+t+"]]>";if("#comment"===e)return l+"\x3c!--"+t+"--\x3e";if("-"===(""+e).charAt(0))return" "+e.substring(1)+'="'+function(t){var e=t;try{"string"!=typeof e&&(e=JSON.parse(t))}catch(n){e=JSON.stringify(i(t)).replace(/"/g,"'")}return e}(t)+'"';if(Array.isArray(t))s+=t.map((function(t){return r(t,e,a+1)})).join("");else if("[object Object]"===n(t)){var d=Object.keys(t),u="",h=t["-json"]?"\t\n"+o(a+1)+t["-json"]:"";s+=(0===a?"":l)+"<"+e,d.forEach((function(e){"-"===e.charAt(0)?u+=r(t[e],e,a+1):h+=r(t[e],e,a+1)})),s+=u+(""!==h?">"+h+l+"</"+e+">":" />")}else s+=l+"<"+e+">"+t.toString()+"</"+e+">";return s}Object.defineProperty(e,"__esModule",{value:!0}),e.handleAttributes=e.lfJson2Xml=void 0,e.handleAttributes=i,e.lfJson2Xml=function(t){var e="";for(var n in t)e+=r(t[n],n,0);return e}},63815:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.lfXml2Json=void 0;var n=function(){};(n.ObjTree=function(){return this}).VERSION="0.23",n.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',n.ObjTree.prototype.attr_prefix="-",n.ObjTree.prototype.parseXML=function(t){var e;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(t,"application/xml");if(!o)return;e=o.documentElement}else window.ActiveXObject&&((n=new ActiveXObject("Microsoft.XMLDOM")).async=!1,n.loadXML(t),e=n.documentElement);if(e)return this.parseDOM(e)},n.ObjTree.prototype.parseHTTP=function(t,e,n){var o,i={};for(var r in e)i[r]=e[r];if(i.method||(void 0===i.postBody&&void 0===i.postbody&&void 0===i.parameters?i.method="get":i.method="post"),n){i.asynchronous=!0;var a=this,s=n,l=i.onComplete;i.onComplete=function(t){var e;t&&t.responseXML&&t.responseXML.documentElement&&(e=a.parseDOM(t.responseXML.documentElement)),s(e,t),l&&l(t)}}else i.asynchronous=!1;if("undefined"!=typeof HTTP&&HTTP.Request)i.uri=t,(d=new HTTP.Request(i))&&(o=d.transport);else if("undefined"!=typeof Ajax&&Ajax.Request){var d;(d=new Ajax.Request(t,i))&&(o=d.transport)}return n?o:o&&o.responseXML&&o.responseXML.documentElement?this.parseDOM(o.responseXML.documentElement):void 0},n.ObjTree.prototype.parseDOM=function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),11!==t.nodeType){var o={};o[t.nodeName]=n,n=o}return n}},n.ObjTree.prototype.parseElement=function(t){if(7!==t.nodeType){if(3===t.nodeType||4===t.nodeType||8===t.nodeType){if(null==t.nodeValue.match(/[^\x00-\x20]/))return;return t.nodeValue}var e=null,n={};if(t.attributes&&t.attributes.length){e={};for(var o=0;o<t.attributes.length;o++)if("string"==typeof(s=t.attributes[o].nodeName)){var i=t.attributes[o].nodeValue;try{i=JSON.parse(t.attributes[o].nodeValue.replace(/'/g,'"'))}catch(e){i=t.attributes[o].nodeValue}null!=i&&(void 0===n[s=this.attr_prefix+s]&&(n[s]=0),n[s]++,this.addNode(e,s,n[s],i))}}if(t.childNodes&&t.childNodes.length){var r=!0;for(e&&(r=!1),o=0;o<t.childNodes.length&&r;o++){var a=t.childNodes[o].nodeType;3!==a&&4!==a&&8!==a&&(r=!1)}if(r)for(e||(e=""),o=0;o<t.childNodes.length;o++)e+=t.childNodes[o].nodeValue;else for(e||(e={}),o=0;o<t.childNodes.length;o++){var s;"string"==typeof(s=t.childNodes[o].nodeName)&&(i=this.parseElement(t.childNodes[o]))&&(void 0===n[s]&&(n[s]=0),n[s]++,this.addNode(e,s,n[s],i))}}else null===e&&(e={});return e}},n.ObjTree.prototype.addNode=function(t,e,n,o){this.__force_array[e]?(1===n&&(t[e]=[]),t[e][t[e].length]=o):1===n?t[e]=o:2===n?t[e]=[t[e],o]:t[e][t[e].length]=o},n.ObjTree.prototype.writeXML=function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e},n.ObjTree.prototype.hash_to_xml=function(t,e){var n=[],o=[];for(var i in e)if(null==e?void 0:e.hasOwnProperty(i)){var r=e[i];i.charAt(0)!==this.attr_prefix?void 0===r||null==r?n[n.length]="<"+i+" />":"object"==typeof r&&r.constructor===Array?n[n.length]=this.array_to_xml(i,r):n[n.length]="object"==typeof r?this.hash_to_xml(i,r):this.scalar_to_xml(i,r):o[o.length]=" "+i.substring(1)+'="'+this.xml_escape(r)+'"'}var a=o.join(""),s=n.join("");return void 0===t||null==t||(s=n.length>0?s.match(/\n/)?"<"+t+a+">\n"+s+"</"+t+">\n":"<"+t+a+">"+s+"</"+t+">\n":"<"+t+a+" />\n"),s},n.ObjTree.prototype.array_to_xml=function(t,e){for(var n=[],o=0;o<e.length;o++){var i=e[o];void 0===i||null==i?n[n.length]="<"+t+" />":"object"==typeof i&&i.constructor===Array?n[n.length]=this.array_to_xml(t,i):n[n.length]="object"==typeof i?this.hash_to_xml(t,i):this.scalar_to_xml(t,i)}return n.join("")},n.ObjTree.prototype.scalar_to_xml=function(t,e){return"#text"===t?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+">\n"},n.ObjTree.prototype.xml_escape=function(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')},e.lfXml2Json=function(t){return(new n.ObjTree).parseXML(t)}},7768:function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||o(e,t,n)},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.bpmnUtils=e.icons=e.BPMNElements=e.useDefinition=void 0;var a=n(92656),s=n(74954),l=n(85293),d=n(82352),u=n(36825),h=n(36825);e.icons=h;var p=n(88545);e.bpmnUtils=p;var c=[{nodes:["startEvent","intermediateCatchEvent","boundaryEvent"],definition:[{type:"bpmn:timerEventDefinition",icon:u.timerIcon,properties:{definitionType:"bpmn:timerEventDefinition",timerValue:"",timerType:""}}]}];function f(t){function e(e){e.forEach((function(e){var n,o;n=e.nodes,o=e.definition,n.forEach((function(e){(null==t?void 0:t[e])||(t[e]=new Map);var n=null==t?void 0:t[e];o.forEach((function(t){n.set(t.type,t)}))}))}))}return function(){return[t,e]}}e.useDefinition=f;var y=function(){function t(t){var e=t.lf;e.definition={},e.useDefinition=f(e.definition);var n=r(e.useDefinition(),2);n[0],(0,n[1])(c),a.registerEventNodes(e),s.registerGatewayNodes(e),d.registerFlows(e),l.registerTaskNodes(e),e.setDefaultEdgeType("bpmn:sequenceFlow")}return t.pluginName="BpmnElementsPlugin",t}();e.BPMNElements=y,i(n(25876),e),i(n(66210),e),i(n(31982),e),i(n(55406),e),i(n(56715),e),i(n(55175),e),i(n(79960),e),i(n(68426),e),i(n(32152),e)},25876:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.EndEventFactory=void 0;var l=n(41918),d=n(88545);e.EndEventFactory=function(t){var e=a(t.useDefinition(),1)[0],n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},n.prototype.getShape=function(){var n,o=this.props.model,i=o.getNodeStyle(),a=o.x,d=o.y,u=o.r,h=o.width,p=o.height,c=o.properties,f=t.prototype.getShape.call(this),y=c.definitionType,g=((null===(n=e.endEvent)||void 0===n?void 0:n.get(y))||{}).icon,v=Array.isArray(g)?l.h.apply(void 0,s(["g",{transform:"matrix(1 0 0 1 "+(a-h/2)+" "+(d-p/2)+")"}],g)):l.h("path",{transform:"matrix(1 0 0 1 "+(a-h/2)+" "+(d-p/2)+")",d:g,style:"fill: black; stroke-linecap: round; stroke-linejoin: round; stroke: white; stroke-width: 1px;"});return l.h("g",{},f,l.h("circle",r(r({},i),{strokeWidth:2,cx:a,cy:d,r:u-2})),v)},n}(l.CircleNode);return{type:"bpmn:endEvent",view:n,model:function(t){function n(n,o){var i,a,s,l;n.id||(n.id="Event_"+d.genBpmnId()),n.text||(n.text=""),n.text&&"string"==typeof n.text&&(n.text={value:n.text,x:n.x,y:n.y+40});var u=((null===(i=e.endEvent)||void 0===i?void 0:i.get(null===(a=n.properties)||void 0===a?void 0:a.definitionType))||{}).properties,h=void 0===u?{}:u;return n.properties=r(r({},h),n.properties),(null===(s=n.properties)||void 0===s?void 0:s.definitionType)&&(n.properties.definitionId="Definition_"+d.genBpmnId()),l=t.call(this,n,o)||this,d.groupRule.call(l),l}return i(n,t),n.prototype.setAttributes=function(){this.r=18},n.prototype.getConnectedSourceRules=function(){var e=this,n=t.prototype.getConnectedSourceRules.call(this),o={message:"结束节点不能作为边的起点",validate:function(t,n){return t!==e}};return n.push(o),n},n}(l.CircleNodeModel)}}},66210:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.IntermediateCatchEventFactory=void 0;var l=n(41918),d=n(88545);e.IntermediateCatchEventFactory=function(t){var e=a(t.useDefinition(),1)[0],n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},n.prototype.getShape=function(){var t,n=this.props.model,o=n.getNodeStyle(),i=n.x,a=n.y,d=n.r,u=n.width,h=n.height,p=n.properties.definitionType,c=((null===(t=e.intermediateCatchEvent)||void 0===t?void 0:t.get(p))||{}).icon,f=Array.isArray(c)?l.h.apply(void 0,s(["g",{transform:"matrix(1 0 0 1 "+(i-u/2)+" "+(a-h/2)+")"}],c)):l.h("path",{transform:"matrix(1 0 0 1 "+(i-u/2)+" "+(a-h/2)+")",d:c});return l.h("g",{},l.h("circle",r(r({},o),{cx:i,cy:a,r:d,strokeWidth:1.5})),l.h("circle",r(r({},o),{cx:i,cy:a,r:d-3,strokeWidth:1.5})),f)},n}(l.CircleNode);return{type:"bpmn:intermediateCatchEvent",view:n,model:function(t){function n(n,o){var i,a,s,l;n.id||(n.id="Event_"+d.genBpmnId()),n.text||(n.text=""),n.text&&"string"==typeof n.text&&(n.text={value:n.text,x:n.x,y:n.y+40});var u=((null===(i=e.intermediateCatchEvent)||void 0===i?void 0:i.get(null===(a=n.properties)||void 0===a?void 0:a.definitionType))||{}).properties,h=void 0===u?{}:u;return n.properties=r(r({},h),n.properties),(null===(s=n.properties)||void 0===s?void 0:s.definitionType)&&(n.properties.definitionId="Definition_"+d.genBpmnId()),l=t.call(this,n,o)||this,d.groupRule.call(l),l}return i(n,t),n.prototype.setAttributes=function(){this.r=18},n}(l.CircleNodeModel)}}},56715:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.IntermediateThrowEventFactory=void 0;var l=n(41918),d=n(88545);e.IntermediateThrowEventFactory=function(t){var e=a(t.useDefinition(),1)[0],n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},n.prototype.getShape=function(){var t,n=this.props.model,o=n.getNodeStyle(),i=n.x,a=n.y,d=n.r,u=n.width,h=n.height,p=n.properties.definitionType,c=((null===(t=e.intermediateThrowEvent)||void 0===t?void 0:t.get(p))||{}).icon,f=Array.isArray(c)?l.h.apply(void 0,s(["g",{transform:"matrix(1 0 0 1 "+(i-u/2)+" "+(a-h/2)+")"}],c)):l.h("path",{transform:"matrix(1 0 0 1 "+(i-u/2)+" "+(a-h/2)+")",d:c,style:"fill: black"});return l.h("g",{},l.h("circle",r(r({},o),{cx:i,cy:a,r:d,strokeWidth:1.5})),l.h("circle",r(r({},o),{cx:i,cy:a,r:d-3,strokeWidth:1.5})),f)},n}(l.CircleNode);return{type:"bpmn:intermediateThrowEvent",view:n,model:function(t){function n(n,o){var i,a,s,l;n.id||(n.id="Event_"+d.genBpmnId()),n.text||(n.text=""),n.text&&"string"==typeof n.text&&(n.text={value:n.text,x:n.x,y:n.y+40});var u=((null===(i=e.intermediateThrowEvent)||void 0===i?void 0:i.get(null===(a=n.properties)||void 0===a?void 0:a.definitionType))||{}).properties,h=void 0===u?{}:u;return n.properties=r(r({},h),n.properties),(null===(s=n.properties)||void 0===s?void 0:s.definitionType)&&(n.properties.definitionId="Definition_"+d.genBpmnId()),l=t.call(this,n,o)||this,d.groupRule.call(l),l}return i(n,t),n.prototype.setAttributes=function(){this.r=18},n}(l.CircleNodeModel)}}},31982:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.StartEventFactory=void 0;var l=n(41918),d=n(88545);e.StartEventFactory=function(t){var e=a(t.useDefinition(),1)[0],n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},n.prototype.getShape=function(){var t,n=this.props.model,o=n.getNodeStyle(),i=n.x,a=n.y,d=n.r,u=n.width,h=n.height,p=n.properties,c=p.definitionType,f=p.isInterrupting,y=((null===(t=e.startEvent)||void 0===t?void 0:t.get(c))||{}).icon,g=Array.isArray(y)?l.h.apply(void 0,s(["g",{transform:"matrix(1 0 0 1 "+(i-u/2)+" "+(a-h/2)+")"}],y)):l.h("path",{transform:"matrix(1 0 0 1 "+(i-u/2)+" "+(a-h/2)+")",d:y,style:"fill: white; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});return l.h("g",{},l.h("circle",r(r({},o),{cx:i,cy:a,r:d,strokeDasharray:f?"5,5":"",strokeWidth:2})),g)},n}(l.CircleNode);return{type:"bpmn:startEvent",view:n,model:function(t){function n(n,o){var i,a,s;n.id||(n.id="Event_"+d.genBpmnId()),n.text||(n.text=""),n.text&&"string"==typeof n.text&&(n.text={value:n.text,x:n.x,y:n.y+40});var l=((null===(i=e.startEvent)||void 0===i?void 0:i.get(null===(a=n.properties)||void 0===a?void 0:a.definitionType))||{}).properties,u=void 0===l?{}:l;return n.properties=r(r({},u),n.properties),(null===(s=n.properties)||void 0===s?void 0:s.definitionType)&&(n.properties.definitionId="Definition_"+d.genBpmnId()),t.call(this,n,o)||this}return i(n,t),n.prototype.setAttributes=function(){this.r=18},n.prototype.getConnectedTargetRules=function(){var e=this,n=t.prototype.getConnectedTargetRules.call(this),o={message:"起始节点不能作为边的终点",validate:function(t,n){return n!==e}};return n.push(o),n},n}(l.CircleNodeModel)}}},55406:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.BoundaryEventFactory=void 0;var l=n(41918),d=n(88545);e.BoundaryEventFactory=function(t){var e=a(t.useDefinition(),1)[0],n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},n.prototype.getShape=function(){var t,n=this.props.model,o=n.getNodeStyle(),i=n.x,a=n.y,d=n.r,u=n.width,h=n.height,p=n.properties,c=p.definitionType,f=p.cancelActivity,y=((null===(t=e.boundaryEvent)||void 0===t?void 0:t.get(c))||{}).icon,g=Array.isArray(y)?l.h.apply(void 0,s(["g",{transform:"matrix(1 0 0 1 "+(i-u/2)+" "+(a-h/2)+")"}],y)):l.h("path",{transform:"matrix(1 0 0 1 "+(i-u/2)+" "+(a-h/2)+")",d:y});return l.h("g",{},l.h("circle",r(r({},o),{cx:i,cy:a,r:d,strokeDasharray:f?"":"5,5",strokeWidth:1.5})),l.h("circle",r(r({},o),{cx:i,cy:a,r:d-3,strokeDasharray:f?"":"5,5",strokeWidth:1.5})),g)},n}(l.CircleNode);return{type:"bpmn:boundaryEvent",view:n,model:function(t){function n(n,o){var i,a,s,l;n.id||(n.id="Event_"+d.genBpmnId()),n.text||(n.text=""),n.text&&"string"==typeof n.text&&(n.text={value:n.text,x:n.x,y:n.y+40});var u=((null===(i=e.boundaryEvent)||void 0===i?void 0:i.get(null===(a=n.properties)||void 0===a?void 0:a.definitionType))||{}).properties,h=void 0===u?{}:u;return n.properties=r(r({attachedToRef:"",cancelActivity:!0},h),n.properties),(null===(s=n.properties)||void 0===s?void 0:s.definitionType)&&(n.properties.definitionId="Definition_"+d.genBpmnId()),l=t.call(this,n,o)||this,d.groupRule.call(l),l}return i(n,t),n.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.r=20,this.autoToFront=!1,this.zIndex=99999},n.prototype.setAttributes=function(){this.r=18},n}(l.CircleNodeModel)}}},92656:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.registerEventNodes=void 0;var o=n(25876),i=n(66210),r=n(31982),a=n(55406),s=n(56715);e.registerEventNodes=function(t){t.register(r.StartEventFactory(t)),t.register(o.EndEventFactory(t)),t.register(i.IntermediateCatchEventFactory(t)),t.register(s.IntermediateThrowEventFactory(t)),t.register(a.BoundaryEventFactory(t))}},82352:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.registerFlows=e.SequenceFlow=void 0;var o=n(55175);e.SequenceFlow=o.sequenceFlowFactory(),e.registerFlows=function(t){t.register(e.SequenceFlow)}},55175:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceFlowFactory=void 0;var a=n(41918),s=n(88545);e.sequenceFlowFactory=function(t){var e=function(e){function n(n,o){n.id||(n.id="Flow_"+s.genBpmnId());var i=r(r(r({},t||{}),n.properties),{isDefaultFlow:!1});return n.properties=i,e.call(this,n,o)||this}return i(n,e),n.extendKey="SequenceFlowModel",n}(a.PolylineEdgeModel),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getStartArrow=function(){return this.props.model.properties.isDefaultFlow?a.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):a.h("path",{d:""})},e.extendKey="SequenceFlowEdge",e}(a.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:e}}},32152:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.GatewayNodeFactory=e.gatewayComposable=void 0;var a=n(41918),s=n(88545);e.gatewayComposable=[[1,1,0],[0,0,1],[0,1,1]],e.GatewayNodeFactory=function(t,e,n){var o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.getShape=function(){var t=this.props.model,n=t.x,o=t.y,i=t.width,s=t.height,l=t.points,d=t.getNodeStyle();return a.h("g",{transform:"matrix(1 0 0 1 "+(n-i/2)+" "+(o-s/2)+")"},a.h("polygon",r(r({},d),{x:n,y:o,points:l})),"string"==typeof e?a.h("path",r(r({d:e},d),{fill:"rgb(34, 36, 42)",strokeWidth:1})):e)},n}(a.PolygonNode);return{type:t,view:o,model:function(t){function e(e,o){var i=this;return e.id||(e.id="Gateway_"+s.genBpmnId()),e.text||(e.text=""),e.text&&"string"==typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),e.properties=r(r({},n||{}),e.properties),(i=t.call(this,e,o)||this).points=[[25,0],[50,25],[25,50],[0,25]],s.groupRule.call(i),i}return i(e,t),e}(a.PolygonNodeModel)}}},74954:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.registerGatewayNodes=void 0;var o=n(36825),i=n(32152);e.registerGatewayNodes=function(t){var e=i.GatewayNodeFactory("bpmn:exclusiveGateway",o.exclusiveIcon),n=i.GatewayNodeFactory("bpmn:parallelGateway",o.parallelIcon),r=i.GatewayNodeFactory("bpmn:inclusiveGateway",o.inclusiveIcon);t.register(e),t.register(r),t.register(n)}},85293:function(t,e,n){var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.registerTaskNodes=void 0;var i=n(36825),r=n(79960),a=n(68426);e.registerTaskNodes=function(t){var e=r.TaskNodeFactory("bpmn:serviceTask",i.serviceTaskIcon),n=r.TaskNodeFactory("bpmn:userTask",i.userTaskIcon);t.register(e),t.register(n),t.register(a.SubProcessFactory()),function(t){function e(t,e){var n=t.x,o=t.y,i=t.width,r=t.height,a=t.id,s=n-i/2,l=n+i/2,d=o-r/2,u=o+r/2,h=e.x,p=e.y;return h>s-5&&h<l+5&&p>d-5&&p<u+5&&!(h>s+5&&h<l-5&&p>d+5&&p<u-5)?a:null}t.on("node:drag,node:dnd-drag",(function(n){var i,r,a=n.data;if("bpmn:boundaryEvent"===a.type){var s=t.graphModel.nodes;try{for(var l=o(s),d=l.next();!d.done;d=l.next()){var u=d.value;u.isTaskNode&&(e(u,a)?u.setTouching(!0):u.setTouching(!1))}}catch(t){i={error:t}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}}})),t.on("node:drop,node:dnd-add",(function(n){var i,r,a=n.data,s=a.type,l=a.id;if("bpmn:boundaryEvent"===s){var d=t.graphModel.nodes;try{for(var u=o(d),h=u.next();!h.done;h=u.next()){var p,c=h.value;if(c.isTaskNode&&null!==(p=e(c,a))){var f=t.graphModel.getNodeModelById(l),y=t.graphModel.getNodeModelById(p),g=f.properties.attachedToRef;return g&&g!==p&&t.graphModel.getNodeModelById(g).deleteBoundaryEvent(l),void y.addBoundaryEvent(l)}}}catch(t){i={error:t}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}}})),t.graphModel.addNodeMoveRules((function(e,n,o){if(e.isTaskNode){var i=e.boundaryEvents;return t.graphModel.moveNodes(i,n,o,!0),!0}return!0}))}(t)}},68426:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.SubProcessFactory=void 0;var a=n(41918),s=n(83027);e.SubProcessFactory=function(){var t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getFoldIcon=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,i=t.height,r=t.properties,s=t.foldable,l=t.x-t.width/2+5,d=t.y-t.height/2+5;if(!s)return null;var u=a.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:r.isFolded?"M "+(l+3)+","+(d+6)+" "+(l+11)+","+(d+6)+" M"+(l+7)+","+(d+2)+" "+(l+7)+","+(d+10):"M "+(l+3)+","+(d+6)+" "+(l+11)+","+(d+6)+" "});return a.h("g",{},[a.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:e-o/2+5,y:n-i/2+5,onClick:function(e){e.stopPropagation(),t.foldGroup(!r.isFolded)}}),u])},e.prototype.getResizeShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,i=t.height,s=t.getNodeStyle(),l=r(r({},s),{x:e-o/2,y:n-i/2,width:o,height:i,stroke:"black",strokeWidth:2,strokeDasharray:"0 0"});return a.h("g",{},[a.h("rect",r({},l)),this.getFoldIcon()])},e}(s.GroupNode.view),e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.foldable=!0,this.resizable=!0,this.width=400,this.height=200,this.resetWidthHeight(),this.isTaskNode=!0,this.boundaryEvents=[]},e.prototype.resetWidthHeight=function(){var t,e,n=null===(t=this.properties.iniProp)||void 0===t?void 0:t.width,o=null===(e=this.properties.iniProp)||void 0===e?void 0:e.height;n&&(this.width=n),o&&(this.height=o)},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this);return e.stroke="#989891",e.strokeWidth=1,e.strokeDasharray="3 3",this.isSelected&&(e.stroke="rgb(124, 15, 255)"),this.properties.isBoundaryEventTouchingTask&&(e.stroke="#00acff",e.strokeWidth=2),e},e.prototype.addChild=function(e){this.graphModel.getElement(e).setProperties({parent:this.id}),t.prototype.addChild.call(this,e)},e.prototype.getAnchorStyle=function(){var e=t.prototype.getAnchorStyle.call(this,{});return e.stroke="#000",e.fill="#fff",e.hover.stroke="transparent",e},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return e.stroke="transparent",!e.hover&&(e.hover={}),e.hover.stroke="transparent",e},e.prototype.setTouching=function(t){this.setProperty("isBoundaryEventTouchingTask",t)},e.prototype.addBoundaryEvent=function(t){if(this.setTouching(!1),this.boundaryEvents.find((function(e){return e===t})))return!1;var e=this.graphModel.getNodeModelById(t);return null==e||e.setProperties({attachedToRef:this.id}),this.boundaryEvents.push(t),!0},e.prototype.deleteBoundaryEvent=function(t){this.boundaryEvents=this.boundaryEvents.filter((function(e){return e!==t}))},e}(s.GroupNode.model);return{type:"bpmn:subProcess",view:t,model:e}}},79960:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.TaskNodeFactory=e.multiInstanceIcon=void 0;var l=n(41918),d=n(36825),u=n(88545);e.multiInstanceIcon={parallel:d.parallelMarker,sequential:d.sequentialMarker,loop:d.loopMarker},e.TaskNodeFactory=function(t,n,o){var a=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return i(o,t),o.prototype.getLabelShape=function(){var t=this.props.model,e=t.x,o=t.y,i=t.width,r=t.height,a=t.getNodeStyle(),d=Array.isArray(n)?l.h.apply(void 0,s(["g",{transform:"matrix(1 0 0 1 "+(e-i/2)+" "+(o-r/2)+")"}],n)):l.h("path",{fill:a.stroke,d:n});return l.h("svg",{x:e-i/2+5,y:o-r/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},d)},o.prototype.getShape=function(){var t=this.props.model,n=t.x,o=t.y,i=t.width,a=t.height,s=t.radius,d=t.properties,u=t.getNodeStyle();return l.h("g",{},[l.h("rect",r(r({},u),{x:n-i/2,y:o-a/2,rx:s,ry:s,width:i,height:a,opacity:.95})),this.getLabelShape(),l.h("g",{transform:"matrix(1 0 0 1 "+(n-i/2)+" "+(o-a/2)+")"},l.h("path",{fill:"white",strokeLinecap:"round",strokeLinejoin:"round",stroke:"rgb(34, 36, 42)",strokeWidth:"2",d:e.multiInstanceIcon[d.multiInstanceType]||""}))])},o}(l.RectNode);return{type:t,view:a,model:function(t){function e(e,n){var i,a=this;e.id||(e.id="Activity_"+u.genBpmnId());var s=r(r({},o||{}),e.properties);return e.properties=s,a=t.call(this,e,n)||this,null===(i=null==s?void 0:s.boundaryEvents)||void 0===i||i.forEach((function(t){a.addBoundaryEvent(t)})),a.deleteProperty("boundaryEvents"),u.groupRule.call(a),a}return i(e,t),e.prototype.initNodeData=function(e){t.prototype.initNodeData.call(this,e),this.isTaskNode=!0,this.boundaryEvents=[]},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this);return this.properties.isBoundaryEventTouchingTask&&(e.stroke="#00acff",e.strokeWidth=2),e},e.prototype.getOutlineStyle=function(){var e=t.prototype.getOutlineStyle.call(this);return e.stroke="transparent",!e.hover&&(e.hover={}),e.hover.stroke="transparent",e},e.prototype.setTouching=function(t){this.setProperty("isBoundaryEventTouchingTask",t)},e.prototype.addBoundaryEvent=function(t){if(this.setTouching(!1),this.boundaryEvents.find((function(e){return e===t})))return!1;var e=this.graphModel.getNodeModelById(t);return null==e||e.setProperties({attachedToRef:this.id}),this.boundaryEvents.push(t),!0},e.prototype.deleteBoundaryEvent=function(t){this.boundaryEvents=this.boundaryEvents.filter((function(e){return e!==t}))},e}(l.RectNodeModel)}}},36825:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.loopMarker=e.sequentialMarker=e.parallelMarker=e.style=e.manualTaskIcon=e.scriptTaskIcon=e.userTaskIcon=e.serviceTaskIcon=e.inclusiveIcon=e.parallelIcon=e.exclusiveIcon=e.terminateIcon=e.signalIcon=e.linkIcon=e.conditionalIcon=e.compensationIcon=e.escalationIcon=e.errorIcon=e.timerIcon=e.messageIcon=void 0;var o=n(41918);e.messageIcon="m 8.459999999999999,11.34 l 0,12.6 l 18.900000000000002,0 l 0,-12.6 z l 9.450000000000001,5.4 l 9.450000000000001,-5.4",e.timerIcon=[o.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),o.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),o.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"})],e.errorIcon="m 7.2,25.991999999999997 0.09350000000000001,-0.025300000000000003 7.3392,-9.610700000000001 7.667000000000001,8.9661 4.7003,-18.2204 -5.8707,11.6501 -7.299600000000001,-9.585400000000002 z",e.escalationIcon="M 18,7.2 l 8,20 l -8,-7 l -8,7 Z",e.compensationIcon="m 7.92,18 9,-6.5 0,13 z m 9.3,-0.4 8.7,-6.1 0,13 -8.7,-6.1 z",e.conditionalIcon="M 10.5,8.5 l 14.5,0 l 0,18 l -14.5,0 Z M 12.5,11.5 l 10.5,0 M 12.5,14.5 l 10.5,0 M 12.5,17.5 l 10.5,0 M 12.5,20.5 l 10.5,0 M 12.5,23.5 l 10.5,0 M 12.5,26.5 l 10.5,0 ",e.linkIcon="m 20.52,9.468 0,4.4375 -13.5,0 0,6.75 13.5,0 0,4.4375 9.84375,-7.8125 -9.84375,-7.8125 z",e.signalIcon="M 18,7.2 l 9,16.2 l -18,0 Z",e.terminateIcon=[o.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"})],e.exclusiveIcon="m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z",e.parallelIcon="m 23,10 0,12.5 -12.5,0 0,5 12.5,0 0,12.5 5,0 0,-12.5 12.5,0 0,-5 -12.5,0 0,-12.5 -5,0 z",e.inclusiveIcon=o.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"}),e.serviceTaskIcon="M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z",e.userTaskIcon="M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z",e.scriptTaskIcon="M6.402,0.5H20.902C20.902,0.5,15.069,3.333,15.069,6.083S19.486,12.083,19.486,15.25S15.319,20.333,15.319,20.333H0.235C0.235,20.333,5.235,17.665999999999997,5.235,15.332999999999998S0.6520000000000001,8.582999999999998,0.6520000000000001,6.082999999999998S6.402,0.5,6.402,0.5ZM3.5,4.5L13.5,4.5M3.8,8.5L13.8,8.5M6.3,12.5L16.3,12.5M6.5,16.5L16.5,16.5",e.manualTaskIcon="M0.5,3.751L4.583,0.5009999999999999C4.583,0.5009999999999999,15.749,0.5839999999999999,16.666,0.5839999999999999S14.249,3.5009999999999994,15.166,3.5009999999999994S26.833,3.5009999999999994,27.75,3.5009999999999994C28.916,5.209,27.582,6.667999999999999,26.916,7.167999999999999S27.791,9.084999999999999,25.916,11.584999999999999C25.166,11.834999999999999,26.666,13.459999999999999,24.583000000000002,14.918C23.416,15.501,25.166,16.46,23.333000000000002,17.750999999999998C22.166,17.750999999999998,2.5000000000000036,17.833999999999996,2.5000000000000036,17.833999999999996L0.5000000000000036,16.500999999999998V3.751ZM13.5,7L27,7M13.5,11L26,11M14,14.5L25,14.5M8.2,3.1L15,3.1",e.style={throw:"fill: rgb(34, 36, 42); stroke-linecap: round; stroke-linejoin: round; stroke: white; stroke-width: 1px;",catch:"fill: white; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;",nonIntermediate:"stroke-width: 1.5; stroke-dash-array: 6",intermediate:"stroke-width: 1.5"},e.parallelMarker="m44,60 m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",e.sequentialMarker="m47,61 m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",e.loopMarker="m 50,73 c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902"},88545:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.genBpmnId=e.groupRule=void 0,e.groupRule=function(){this.targetRules.push({message:"分组外的节点不允许连接分组内的",validate:function(t,e,n,o){var i=!!t.properties.parent,r=!!e.properties.parent;return!(!i&&r)}})};var n=function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},t.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},t}(),o=(null===globalThis||void 0===globalThis?void 0:globalThis._ids)||new n;e.genBpmnId=function(){return o.next()}},69548:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.theme=e.UserTaskConfig=e.ServiceTaskConfig=e.ExclusiveGatewayConfig=e.EndEventConfig=e.StartEventConfig=void 0,e.StartEventConfig={width:40,height:40},e.EndEventConfig={width:40,height:40},e.ExclusiveGatewayConfig={width:40,height:40},e.ServiceTaskConfig={width:100,height:80},e.UserTaskConfig={width:100,height:80},e.theme={rect:{radius:5,stroke:"rgb(24, 125, 255)"},circle:{r:18,stroke:"rgb(24, 125, 255)"},polygon:{stroke:"rgb(24, 125, 255)"},polyline:{stroke:"rgb(24, 125, 255)",hoverStroke:"rgb(24, 125, 255)",selectedStroke:"rgb(24, 125, 255)"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}}}},94679:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.EndEventModel=e.EndEventView=void 0;var a=n(41918),s=n(97510),l=function(t){function e(e,n){return e.id||(e.id="Event_"+s.getBpmnId()),e.text||(e.text=""),e.text&&"string"==typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),t.call(this,e,n)||this}return i(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedSourceRules=function(){var e=t.prototype.getConnectedSourceRules.call(this);return e.push({message:"结束节点不能作为边的起点",validate:function(){return!1}}),e},e.extendKey="EndEventModel",e}(a.CircleNodeModel);e.EndEventModel=l;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},e.prototype.getShape=function(){var e=this.props.model,n=e.getNodeStyle(),o=e.x,i=e.y,s=e.r,l=t.prototype.getShape.call(this);return a.h("g",{},l,a.h("circle",r(r({},n),{cx:o,cy:i,r:s-5})))},e.extendKey="EndEventView",e}(a.CircleNode);e.EndEventView=d;var u={type:"bpmn:endEvent",view:d,model:l};e.default=u},84408:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.StartEventView=e.StartEventModel=void 0;var r=n(41918),a=n(97510),s=function(t){function e(e,n){return e.id||(e.id="Event_"+a.getBpmnId()),e.text||(e.text=""),e.text&&"string"==typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),t.call(this,e,n)||this}return i(e,t),e.prototype.setAttributes=function(){this.r=18},e.prototype.getConnectedTargetRules=function(){var e=t.prototype.getConnectedTargetRules.call(this);return e.push({message:"起始节点不能作为边的终点",validate:function(){return!1}}),e},e.extendKey="StartEventModel",e}(r.CircleNodeModel);e.StartEventModel=s;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.extendKey="StartEventNode",e}(r.CircleNode);e.StartEventView=l;var d={type:"bpmn:startEvent",view:l,model:s};e.default=d},6342:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SequenceFlowModel=e.SequenceFlowView=void 0;var r=n(41918),a=n(97510),s=function(t){function e(e,n){return e.id||(e.id="Flow_"+a.getBpmnId()),t.call(this,e,n)||this}return i(e,t),e.extendKey="SequenceFlowModel",e}(r.PolylineEdgeModel);e.SequenceFlowModel=s;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.extendKey="SequenceFlowEdge",e}(r.PolylineEdge);e.SequenceFlowView=l;var d={type:"bpmn:sequenceFlow",view:l,model:s};e.default=d},49136:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ExclusiveGatewayModel=e.ExclusiveGatewayView=void 0;var a=n(41918),s=n(97510),l=function(t){function e(e,n){var o=this;return e.id||(e.id="Gateway_"+s.getBpmnId()),e.text||(e.text=""),e.text&&"string"==typeof e.text&&(e.text={value:e.text,x:e.x,y:e.y+40}),(o=t.call(this,e,n)||this).points=[[25,0],[50,25],[25,50],[0,25]],o}return i(e,t),e.extendKey="ExclusiveGatewayModel",e}(a.PolygonNodeModel);e.ExclusiveGatewayModel=l;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,i=t.height,s=t.points,l=t.getNodeStyle();return a.h("g",{transform:"matrix(1 0 0 1 "+(e-o/2)+" "+(n-i/2)+")"},a.h("polygon",r(r({},l),{x:e,y:n,points:s})),a.h("path",r({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},l)))},e.extendKey="ExclusiveGatewayNode",e}(a.PolygonNode);e.ExclusiveGatewayView=d;var u={type:"bpmn:exclusiveGateway",view:d,model:l};e.default=u},97510:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBpmnId=void 0;var n=function(){function t(){globalThis._ids=this,this._ids=new Set}return t.prototype.generateId=function(){return"xxxxxxx".replace(/[x]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},t.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},t}(),o=(null===globalThis||void 0===globalThis?void 0:globalThis._ids)||new n;e.getBpmnId=function(){return o.next()}},90482:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SequenceFlowModel=e.SequenceFlowView=e.ServiceTaskModel=e.ServiceTaskView=e.UserTaskModel=e.UserTaskView=e.ExclusiveGatewayModel=e.ExclusiveGatewayView=e.EndEventModel=e.EndEventView=e.StartEventView=e.StartEventModel=e.BpmnElement=void 0;var o=n(84408);Object.defineProperty(e,"StartEventModel",{enumerable:!0,get:function(){return o.StartEventModel}}),Object.defineProperty(e,"StartEventView",{enumerable:!0,get:function(){return o.StartEventView}});var i=n(94679);Object.defineProperty(e,"EndEventView",{enumerable:!0,get:function(){return i.EndEventView}}),Object.defineProperty(e,"EndEventModel",{enumerable:!0,get:function(){return i.EndEventModel}});var r=n(49136);Object.defineProperty(e,"ExclusiveGatewayView",{enumerable:!0,get:function(){return r.ExclusiveGatewayView}}),Object.defineProperty(e,"ExclusiveGatewayModel",{enumerable:!0,get:function(){return r.ExclusiveGatewayModel}});var a=n(52641);Object.defineProperty(e,"UserTaskView",{enumerable:!0,get:function(){return a.UserTaskView}}),Object.defineProperty(e,"UserTaskModel",{enumerable:!0,get:function(){return a.UserTaskModel}});var s=n(58769);Object.defineProperty(e,"ServiceTaskView",{enumerable:!0,get:function(){return s.ServiceTaskView}}),Object.defineProperty(e,"ServiceTaskModel",{enumerable:!0,get:function(){return s.ServiceTaskModel}});var l=n(6342);Object.defineProperty(e,"SequenceFlowView",{enumerable:!0,get:function(){return l.SequenceFlowView}}),Object.defineProperty(e,"SequenceFlowModel",{enumerable:!0,get:function(){return l.SequenceFlowModel}});var d=n(69548),u=function(){function t(t){var e=t.lf;e.setTheme(d.theme),e.register(o.default),e.register(i.default),e.register(r.default),e.register(a.default),e.register(s.default),e.options.customBpmnEdge||(e.register(l.default),e.setDefaultEdgeType("bpmn:sequenceFlow"))}return t.pluginName="bpmnElement",t}();e.BpmnElement=u},58769:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceTaskModel=e.ServiceTaskView=void 0;var a=n(41918),s=n(97510),l=function(t){function e(e,n){return e.id||(e.id="Activity_"+s.getBpmnId()),t.call(this,e,n)||this}return i(e,t),e.extendKey="ServiceTaskModel",e}(a.RectNodeModel);e.ServiceTaskModel=l;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getLabelShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,i=t.height,r=t.getNodeStyle();return a.h("svg",{x:e-o/2+5,y:n-i/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},a.h("path",{fill:r.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,i=t.height,s=t.radius,l=t.getNodeStyle();return a.h("g",{},[a.h("rect",r({x:e-o/2,y:n-i/2,rx:s,ry:s,width:o,height:i},l)),this.getLabelShape()])},e.extendKey="ServiceTaskNode",e}(a.RectNode);e.ServiceTaskView=d;var u={type:"bpmn:serviceTask",view:d,model:l};e.default=u},52641:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.UserTaskModel=e.UserTaskView=void 0;var a=n(41918),s=n(97510),l=function(t){function e(e,n){return e.id||(e.id="Activity_"+s.getBpmnId()),t.call(this,e,n)||this}return i(e,t),e.extendKey="UserTaskModel",e}(a.RectNodeModel);e.UserTaskModel=l;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getLabelShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,i=t.height,r=t.getNodeStyle();return a.h("svg",{x:e-o/2+5,y:n-i/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},a.h("path",{fill:r.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,o=t.width,i=t.height,s=t.radius,l=t.getNodeStyle();return a.h("g",{},[a.h("rect",r(r({},l),{x:e-o/2,y:n-i/2,rx:s,ry:s,width:o,height:i})),this.getLabelShape()])},e.extendKey="UserTaskNode",e}(a.RectNode);e.UserTaskView=d;var u={type:"bpmn:userTask",view:d,model:l};e.default=u},30517:function(t,e){var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextMenu=void 0;var o="menu-common",i=function(){function t(t){var e=this,n=t.lf;this.menuTypeMap=new Map,this.listenDelete=function(){e.hideContextMenu()},this.lf=n,this.__menuDOM=document.createElement("div"),this.__menuDOM.className="lf-inner-context",this.menuTypeMap.set(o,[]),this.lf.setContextMenuByType=function(t,n){e.setContextMenuByType(t,n)},this.lf.setContextMenuItems=function(t){e.setContextMenuItems(t)},this.lf.showContextMenu=function(t){e.showContextMenu(t)},this.lf.hideContextMenu=function(){e.hideContextMenu()}}return t.prototype.render=function(t,e){var n=this;this.container=e,t.on("node:click",(function(t){var e=t.data;n._activeData=e,n.createContextMenu()})),t.on("edge:click",(function(t){var e=t.data;n._activeData=e,n.createContextMenu()})),t.on("blank:click",(function(){n.hideContextMenu()}))},t.prototype.setContextMenuByType=function(t,e){this.menuTypeMap.set(t,e)},t.prototype.hideContextMenu=function(){this.__menuDOM.innerHTML="",this.__menuDOM.style.display="none",this.isShow&&this.container.removeChild(this.__menuDOM),this.lf.off("node:delete,edge:delete,node:drag,graph:transform",this.listenDelete),this.isShow=!1},t.prototype.showContextMenu=function(t){t&&t.id?(this._activeData=t,this.createContextMenu()):console.warn("请检查传入的参数")},t.prototype.setContextMenuItems=function(t){this.menuTypeMap.set(o,t)},t.prototype.getContextMenuPosition=function(){var t=this._activeData,e=this.lf.graphModel.getElement(t.id);if(e){var n,o;if("edge"===e.BaseType){n=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER;var i=e.getData();n=Math.max(i.startPoint.x,n),o=Math.min(i.startPoint.y,o),n=Math.max(i.endPoint.x,n),o=Math.min(i.endPoint.y,o),i.pointsList&&i.pointsList.forEach((function(t){n=Math.max(t.x,n),o=Math.min(t.y,o)}))}return"node"===e.BaseType&&(n=t.x+e.width/2,o=t.y-e.height/2),this.lf.graphModel.transformModel.CanvasPointToHtmlPoint([n,o])}console.warn("找不到元素"+t.id)},t.prototype.createContextMenu=function(){var t=this;if(!this.lf.options.isSilentMode){var e=this.menuTypeMap.get(this._activeData.type)||[];e=e.concat(this.menuTypeMap.get(o));var n=document.createDocumentFragment();e.forEach((function(e){var o=document.createElement("div");o.className="lf-context-item";var i=document.createElement("img");i.src=e.icon,i.className="lf-context-img",e.className&&(o.className=o.className+" "+e.className),i.addEventListener("click",(function(){t.hideContextMenu(),e.callback?e.callback(t._activeData):t.addNode({sourceId:t._activeData.id,x:t._activeData.x,y:t._activeData.y,properties:e.properties,type:e.type})})),o.appendChild(i),n.appendChild(o)})),this.__menuDOM.innerHTML="",this.__menuDOM.appendChild(n),this.showMenu()}},t.prototype.addNode=function(t,e){var n=void 0!==e;void 0===e&&(e=t.y);var o=this.lf.getNodeModelById(t.sourceId),i=t.x-o.width+200,r=e-t.y/2-20,a=t.x+o.width+200,s=e+t.y/2+20;if(this.lf.getAreaElement([i,r],[a,s]).length)return e+=100,void this.addNode(t,e);var l,d,u=this.lf.addNode({type:t.type,x:t.x+200,y:e,properties:t.properties});n&&(l={x:t.x,y:t.y+o.height/2},d={x:u.x-u.width/2,y:u.y}),this.lf.addEdge({sourceNodeId:t.sourceId,targetNodeId:u.id,startPoint:l,endPoint:d})},t.prototype.showMenu=function(){var t=n(this.getContextMenuPosition(),2),e=t[0],o=t[1];this.__menuDOM.style.display="flex",this.__menuDOM.style.top=o+"px",this.__menuDOM.style.left=e+10+"px",this.container.appendChild(this.__menuDOM),!this.isShow&&this.lf.on("node:delete,edge:delete,node:drag,graph:transform",this.listenDelete),this.isShow=!0},t.pluginName="contextMenu",t}();e.ContextMenu=i,e.default=i},45245:function(t,e){var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Control=void 0;var i=function(){function t(t){var e=this,n=t.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"缩小流程图",text:"缩小",onClick:function(){e.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"放大流程图",text:"放大",onClick:function(){e.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"恢复流程原有尺寸",text:"适应",onClick:function(){e.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"回到上一步",text:"上一步",onClick:function(){e.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"移到下一步",text:"下一步",onClick:function(){e.lf.redo()}}],this.lf=n}return t.prototype.render=function(t,e){this.destroy();var n=this.getControlTool();this.toolEl=n,e.appendChild(n),this.domContainer=e},t.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},t.prototype.addItem=function(t){this.controlItems.push(t)},t.prototype.removeItem=function(t){var e=this.controlItems.findIndex((function(e){return e.key===t}));return-1==e?null:this.controlItems.splice(e,1)[0]},t.prototype.getControlTool=function(){var t=this,e="lf-control-item",n="lf-control-item disabled",i=document.createElement("div"),r=[];return i.className="lf-control",this.controlItems.forEach((function(o){var i=document.createElement("div"),a=document.createElement("i"),s=document.createElement("span");switch(i.className=n,o.onClick&&(i.onclick=o.onClick.bind(null,t.lf)),o.onMouseEnter&&(i.onmouseenter=o.onMouseEnter.bind(null,t.lf)),o.onMouseLeave&&(i.onmouseleave=o.onMouseLeave.bind(null,t.lf)),a.className=o.iconClass,s.className="lf-control-text",s.title=o.title,s.innerText=o.text,i.append(a,s),o.text){case"上一步":t.lf.on("history:change",(function(t){var o=t.data.undoAble;i.className=o?e:n}));break;case"下一步":t.lf.on("history:change",(function(t){var o=t.data.redoAble;i.className=o?e:n}));break;default:i.className=e}r.push(i)})),i.append.apply(i,o(r)),i},t.pluginName="control",t}();e.Control=i,e.default=i},28833:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DndPanel=void 0;var n=function(){function t(t){var e=this,n=t.lf;this.lf=n,this.lf.setPatternItems=function(t){e.setPatternItems(t)}}return t.prototype.render=function(t,e){var n=this;this.destroy(),this.shapeList&&0!==this.shapeList.length?(this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach((function(t){n.panelEl.appendChild(n.createDndItem(t))})),e.appendChild(this.panelEl),this.domContainer=e):this.domContainer=e},t.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},t.prototype.setPatternItems=function(t){this.shapeList=t,this.domContainer&&this.render(this.lf,this.domContainer)},t.prototype.createDndItem=function(t){var e=this,n=document.createElement("div");n.className=t.className?"lf-dnd-item "+t.className:"lf-dnd-item";var o=document.createElement("div");if(o.className="lf-dnd-shape",t.icon&&(o.style.backgroundImage="url("+t.icon+")"),n.appendChild(o),t.label){var i=document.createElement("div");i.innerText=t.label,i.className="lf-dnd-text",n.appendChild(i)}return t.disabled?(n.classList.add("disabled"),n.onmousedown=function(){t.callback&&t.callback(e.lf,e.domContainer)},n):(n.onmousedown=function(){t.type&&e.lf.dnd.startDrag({type:t.type,properties:t.properties,text:t.text}),t.callback&&t.callback(e.lf,e.domContainer)},n.ondblclick=function(n){e.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:n,data:t})},n.onclick=function(n){e.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:n,data:t})},n.oncontextmenu=function(n){e.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:n,data:t})},n)},t.pluginName="dndPanel",t}();e.DndPanel=n},60920:function(t,e){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Highlight=void 0;var r=function(){function t(t){var e=t.lf;this.mode="path",this.manual=!1,this.tempStyles={},this.lf=e}return t.prototype.setMode=function(t){this.mode=t},t.prototype.setManual=function(t){this.manual=t},t.prototype.highlightSingle=function(t){var e=this.lf.getModelById(t);"node"===e.BaseType?e.updateStyles(this.tempStyles[t]):"edge"===e.BaseType&&(e.updateStyles(this.tempStyles[t]),e.sourceNode.updateStyles(this.tempStyles[e.sourceNode.id]),e.targetNode.updateStyles(this.tempStyles[e.targetNode.id]))},t.prototype.highlightPath=function(t){var e=this,n=function(t,e){var n=e.getModelById(t);return function(t,e){var n=[],o=[],r=function(t,o,a){void 0===a&&(a=null),a&&o.unshift.apply(o,i(e.getEdgeModels({sourceNodeId:t.id,targetNodeId:a.id}).map((function(t){return t.id})))),o.includes(t.id)?n.push(o):(o.unshift(t.id),t.incoming.nodes.length?t.incoming.nodes.forEach((function(e){r(e,o.slice(),t)})):n.push(o))},a=function(t,n,r){void 0===r&&(r=null),r&&n.push.apply(n,i(e.getEdgeModels({sourceNodeId:r.id,targetNodeId:t.id}).map((function(t){return t.id})))),n.includes(t.id)?o.push(n):(n.push(t.id),t.outgoing.nodes.length?t.outgoing.nodes.forEach((function(e){a(e,n.slice(),t)})):o.push(n))};return r(t,[]),a(t,[]),i(new Set(i(n.flat(),o.flat())))}("node"===n.BaseType?n:n.targetNode,e)}(t,this.lf);n.forEach((function(t){e.lf.getModelById(t).updateStyles(e.tempStyles[t])}))},t.prototype.highlight=function(t,e){var o=this;void 0===e&&(e=this.mode),this.manual||(Object.keys(this.tempStyles).length&&this.restoreHighlight(),Object.values(this.lf.graphModel.modelsMap).forEach((function(t){var e="node"===t.BaseType?t.getNodeStyle():t.getEdgeStyle();o.tempStyles[t.id]=n({},e),t.setStyles({opacity:.1})})),{single:this.highlightSingle.bind(this),path:this.highlightPath.bind(this)}[e](t))},t.prototype.restoreHighlight=function(){var t=this;Object.keys(this.tempStyles).length&&(Object.values(this.lf.graphModel.modelsMap).forEach((function(e){var o,i=null!==(o=t.tempStyles[e.id])&&void 0!==o?o:{};e.updateStyles(n({},i))})),this.tempStyles={})},t.prototype.render=function(t,e){var n=this;this.lf.on("node:mouseenter",(function(t){var e=t.data;return n.highlight(e.id)})),this.lf.on("edge:mouseenter",(function(t){var e=t.data;return n.highlight(e.id)})),this.lf.on("node:mouseleave",this.restoreHighlight.bind(this)),this.lf.on("edge:mouseleave",this.restoreHighlight.bind(this)),this.lf.on("history:change",this.restoreHighlight.bind(this))},t.prototype.destroy=function(){},t.pluginName="highlight",t}();e.Highlight=r},9283:function(t,e){var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Menu=void 0;var i="lf:defaultNodeMenu",r="lf:defaultEdgeMenu",a="lf:defaultGraphMenu",s="lf:defaultSelectionMenu",l=function(){function t(t){var e=this,n=t.lf;this.lf=n,n.options.isSilentMode||(this.__menuDOM=document.createElement("ul"),this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(t){e.setMenuConfig(t)},this.lf.addMenuConfig=function(t){e.addMenuConfig(t)},this.lf.setMenuByType=function(t){e.setMenuByType(t)})}return t.prototype.init=function(){var t=this,e=[{text:"删除",callback:function(e){t.lf.deleteNode(e.id)}},{text:"编辑文本",callback:function(e){t.lf.graphModel.editText(e.id)}},{text:"复制",callback:function(e){t.lf.cloneNode(e.id)}}];this.menuTypeMap.set(i,e);var n=[{text:"删除",callback:function(e){t.lf.deleteEdge(e.id)}},{text:"编辑文本",callback:function(e){t.lf.graphModel.editText(e.id)}}];this.menuTypeMap.set(r,n),this.menuTypeMap.set(a,[]);var o=[{text:"删除",callback:function(e){t.lf.clearSelectElements(),e.edges.forEach((function(e){return t.lf.deleteEdge(e.id)})),e.nodes.forEach((function(e){return t.lf.deleteNode(e.id)}))}}];this.menuTypeMap.set(s,o)},t.prototype.render=function(t,e){var n=this;t.options.isSilentMode||(this.__container=e,this.__currentData=null,this.__menuDOM.className="lf-menu",e.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",(function(t){t.stopPropagation();for(var e=t.target;-1===Array.from(e.classList).indexOf("lf-menu-item")&&-1===Array.from(e.classList).indexOf("lf-menu");)e=e.parentElement;Array.from(e.classList).indexOf("lf-menu-item")>-1?(e.onclickCallback(n.__currentData),n.__menuDOM.style.display="none",n.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")}),!0),this.lf.on("node:contextmenu",(function(t){var e,o=t.data,r=t.position,a=t.e,s=r.domOverlayPosition,l=s.x,d=s.y,u=o.id,h=n.lf.graphModel.getNodeModelById(u),p=n.menuTypeMap.get(h.type);e=h&&h.menu&&Array.isArray(h.menu)?h.menu:p||n.menuTypeMap.get(i),n.__currentData=o,n.showMenu(l,d,e,{width:h.width,height:h.height,clientX:a.clientX,clientY:a.clientY})})),this.lf.on("edge:contextmenu",(function(t){var e,o=t.data,i=t.position,a=t.e,s=i.domOverlayPosition,l=s.x,d=s.y,u=o.id,h=n.lf.graphModel.getEdgeModelById(u),p=n.menuTypeMap.get(h.type);e=h&&h.menu&&Array.isArray(h.menu)?h.menu:p||n.menuTypeMap.get(r),n.__currentData=o,n.showMenu(l,d,e,{width:h.width,height:h.height,clientX:a.clientX,clientY:a.clientY})})),this.lf.on("blank:contextmenu",(function(t){var e=t.position,o=n.menuTypeMap.get(a),i=e.domOverlayPosition,r=i.x,s=i.y;n.showMenu(r,s,o)})),this.lf.on("selection:contextmenu",(function(t){var e=t.data,o=t.position,i=n.menuTypeMap.get(s),r=o.domOverlayPosition,a=r.x,l=r.y;n.__currentData=e,n.showMenu(a,l,i)})),this.lf.on("node:mousedown",(function(){n.__menuDOM.style.display="none"})),this.lf.on("edge:click",(function(){n.__menuDOM.style.display="none"})),this.lf.on("blank:click",(function(){n.__menuDOM.style.display="none"})))},t.prototype.destroy=function(){var t;null===(t=null==this?void 0:this.__container)||void 0===t||t.removeChild(this.__menuDOM),this.__menuDOM=null},t.prototype.showMenu=function(t,e,n,i){if(n&&n.length){var r=this.__menuDOM;if(r.innerHTML="",r.append.apply(r,o(this.__getMenuDom(n))),r.children.length){if(r.style.display="block",!i)return r.style.top=e+"px",void(r.style.left=t+"px");var a=i.width,s=i.height,l=i.clientX,d=i.clientY,u=this.lf.graphModel,h=r.offsetWidth,p=!0,c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,f=c-l,y=u.rootEl.getBoundingClientRect(),g=y.left+y.width;g<c&&(f=g-l),f<h&&(p=!1),r.style.left=p?t+"px":t-a+"px";var v=r.offsetHeight,m=!0,x=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,b=x-d,w=y.top+y.height;w<x&&(b=w-d),b<v&&(m=!1),r.style.top=m?e+"px":e-s+"px"}}},t.prototype.setMenuByType=function(t){t.type&&t.menu&&this.menuTypeMap.set(t.type,t.menu)},t.prototype.__getMenuDom=function(t){var e=[];return t&&t.length>0&&t.forEach((function(t){var n=document.createElement("li");if(t.className?n.className="lf-menu-item "+t.className:n.className="lf-menu-item",!0===t.icon){var o=document.createElement("span");o.className="lf-menu-item-icon",n.appendChild(o)}var i=document.createElement("span");i.className="lf-menu-item-text",t.text&&(i.innerText=t.text),n.appendChild(i),n.onclickCallback=t.callback,e.push(n)})),e},t.prototype.setMenuConfig=function(t){t&&(void 0!==t.nodeMenu&&this.menuTypeMap.set(i,t.nodeMenu?t.nodeMenu:[]),void 0!==t.edgeMenu&&this.menuTypeMap.set(r,t.edgeMenu?t.edgeMenu:[]),void 0!==t.graphMenu&&this.menuTypeMap.set(a,t.graphMenu?t.graphMenu:[]))},t.prototype.addMenuConfig=function(t){if(t){if(Array.isArray(t.nodeMenu)){var e=this.menuTypeMap.get(i);this.menuTypeMap.set(i,e.concat(t.nodeMenu))}Array.isArray(t.edgeMenu)&&(e=this.menuTypeMap.get(r),this.menuTypeMap.set(r,e.concat(t.edgeMenu))),Array.isArray(t.graphMenu)&&(e=this.menuTypeMap.get(a),this.menuTypeMap.set(a,e.concat(t.graphMenu)))}},t.prototype.changeMenuItem=function(t,e){if("add"===t)this.addMenuConfig(e);else{if("reset"!==t)throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'");this.setMenuConfig(e)}},t.pluginName="menu",t}();e.Menu=l,e.default=l},66787:function(t,e,n){var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MiniMap=void 0;var i=n(47699),r=function(){function t(t){var e=this,n=t.lf,o=t.LogicFlow,i=t.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(t,n){e.setView(),e.isShow||e.createMiniMap(t,n),e.isShow=!0},this.hide=function(){e.isShow&&e.removeMiniMap(),e.isShow=!1},this.reset=function(){e.lf.resetTranslate(),e.lf.resetZoom(),e.hide(),e.show()},this.startDrag=function(t){document.addEventListener("mousemove",e.drag),document.addEventListener("mouseup",e.drop),e.startPosition={x:t.x,y:t.y}},this.moveViewport=function(t,n){var o=e.viewport.style;e.viewPortTop=t,e.viewPortLeft=n,o.top=e.viewPortTop+"px",o.left=e.viewPortLeft+"px"},this.drag=function(t){e.dragging=!0;var n=e.viewPortTop+t.y-e.startPosition.y,o=e.viewPortLeft+t.x-e.startPosition.x;e.moveViewport(n,o),e.startPosition={x:t.x,y:t.y};var i=(e.viewPortLeft+e.viewPortWidth/2)/e.viewPortScale,r=(e.viewPortTop+e.viewPortHeight/2)/e.viewPortScale;e.lf.focusOn({coordinate:{x:i+e.resetDataX,y:r+e.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",e.drag),document.removeEventListener("mouseup",e.drop);var t=e.viewPortTop,n=e.viewPortLeft;e.viewPortLeft>e.width&&(n=e.width-e.viewPortWidth),e.viewPortTop>e.height&&(t=e.height-e.viewPortHeight),e.viewPortLeft<-e.width&&(n=0),e.viewPortTop<-e.height&&(t=0),e.moveViewport(t,n)},this.mapClick=function(t){if(e.dragging)e.dragging=!1;else{var n=t.layerX,o=t.layerY,i=e.lf.getGraphRawData(),r=e.getBounds(i),a=r.left,s=r.top,l=a+n/e.viewPortScale,d=s+o/e.viewPortScale;e.lf.focusOn({coordinate:{x:l,y:d}})}},this.lf=n,i&&i.MiniMap&&this.setOption(i),this.miniMapWidth=n.graphModel.width,this.miniMapHeight=n.graphModel.width*this.height/this.width,this.LogicFlow=o,this.initMiniMap()}return t.prototype.render=function(t,e){var n=this;this.container=e,this.lf.on("history:change",(function(){n.isShow&&n.setView()})),this.lf.on("graph:transform",i.throttle((function(){n.isShow&&!n.dragging&&n.setView()}),300))},t.prototype.init=function(t){this.disabledPlugins=this.disabledPlugins.concat(t.disabledPlugins||[])},t.prototype.setOption=function(t){var e=t.MiniMap,n=e.width,o=void 0===n?150:n,i=e.height,r=void 0===i?220:i,a=e.isShowHeader,s=void 0===a||a,l=e.isShowCloseIcon,d=void 0===l||l,u=e.leftPosition,h=void 0===u?0:u,p=e.topPosition,c=void 0===p?0:p,f=e.rightPosition,y=e.bottomPosition;this.width=o,this.height=r,this.isShowHeader=s,this.isShowCloseIcon=d,this.viewPortWidth=o,this.leftPosition=h,this.topPosition=c,this.rightPosition=f,this.bottomPosition=y},t.prototype.initMiniMap=function(){var t=document.createElement("div");t.className="lf-mini-map-graph",t.style.width=this.width+4+"px",t.style.height=this.height+"px",this.lfMap=new this.LogicFlow({container:t,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(t){return t},this.lfMap.adapterOut=function(t){return t},this.miniMapWrap=t,this.createViewPort(),t.addEventListener("click",this.mapClick)},t.prototype.createMiniMap=function(e,n){var o=document.createElement("div");o.appendChild(this.miniMapWrap),void 0!==e||void 0!==n?(o.style.left=(e||0)+"px",o.style.top=(n||0)+"px"):(void 0!==this.rightPosition?o.style.right=this.rightPosition+"px":void 0!==this.leftPosition&&(o.style.left=this.leftPosition+"px"),void 0!==this.bottomPosition?o.style.bottom=this.bottomPosition+"px":void 0!==this.topPosition&&(o.style.top=this.topPosition+"px")),o.style.position="absolute",o.className="lf-mini-map",this.isShowCloseIcon||o.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||o.classList.add("lf-mini-map-no-header"),this.container.appendChild(o),this.miniMapWrap.appendChild(this.viewport);var i=document.createElement("div");i.className="lf-mini-map-header",i.innerText=t.headerTitle,o.appendChild(i);var r=document.createElement("span");r.className="lf-mini-map-close",r.addEventListener("click",this.hide),o.appendChild(r),this.miniMapContainer=o},t.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},t.prototype.getBounds=function(t){var e=0,n=this.miniMapWidth,o=0,i=this.miniMapHeight,r=t.nodes;return r&&r.length>0&&r.forEach((function(t){var r=t.x,a=t.y,s=t.width,l=void 0===s?200:s,d=t.height,u=void 0===d?200:d,h=r-l/2,p=r+l/2,c=a-u/2,f=a+u/2;e=h<e?h:e,n=p>n?p:n,o=c<o?c:o,i=f>i?f:i})),{left:e,top:o,bottom:i,right:n}},t.prototype.resetData=function(t){var e=t.nodes,n=t.edges,o=0,i=0;return e&&e.length>0&&(e.forEach((function(t){var e=t.x,n=t.y,r=t.width,a=void 0===r?200:r,s=t.height,l=e-a/2,d=n-(void 0===s?200:s)/2;o=l<o?l:o,i=d<i?d:i})),(o<0||i<0)&&(this.resetDataX=o,this.resetDataY=i,e.forEach((function(t){t.x=t.x-o,t.y=t.y-i,t.text&&(t.text.x=t.text.x-o,t.text.y=t.text.y-i)})),n.forEach((function(t){t.startPoint&&(t.startPoint.x=t.startPoint.x-o,t.startPoint.y=t.startPoint.y-i),t.endPoint&&(t.endPoint.x=t.endPoint.x-o,t.endPoint.y=t.endPoint.y-i),t.text&&(t.text.x=t.text.x-o,t.text.y=t.text.y-i),t.pointsList&&t.pointsList.forEach((function(t){t.x=t.x-o,t.y=t.y-i}))})))),t},t.prototype.setView=function(){var t,e,n=this.lf.getGraphRawData(),i=this.resetData(n),r=this.lf.viewMap,a=this.lf.graphModel.modelMap,s=this.lfMap.viewMap;try{for(var l=o(r.keys()),d=l.next();!d.done;d=l.next()){var u=d.value;s.has(u)||(this.lfMap.setView(u,r.get(u)),this.lfMap.graphModel.modelMap.set(u,a.get(u)))}}catch(e){t={error:e}}finally{try{d&&!d.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}this.lfMap.render(i);var h=this.getBounds(i),p=h.left,c=h.top,f=h.right,y=h.bottom,g=this.width/(f-p),v=this.height/(y-c),m=this.miniMapWrap.firstChild.style,x=Math.min(g,v);m.pointerEvents="none",m.transform="matrix("+x+", 0, 0, "+x+", 0, 0)",m.transformOrigin="left top",m.height=y-Math.min(c,0)+"px",m.width=f-Math.min(p,0)+"px",this.viewPortScale=x,this.setViewPort(x,{left:p,top:c,right:f,bottom:y})},t.prototype.setViewPort=function(t,e){var n=e.left,o=e.right,i=(e.top,e.bottom,this.viewport.style);i.width=this.viewPortWidth+"px",i.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var r=this.lf.getTransform(),a=r.TRANSLATE_X,s=r.TRANSLATE_Y,l=r.SCALE_X,d=r.SCALE_Y,u=o-n,h=this.width/(u/this.lf.graphModel.width),p=this.width*(h/this.width),c=p/(this.lf.graphModel.width/this.lf.graphModel.height),f=this.lf.getGraphRawData(),y=this.getBounds(f),g=y.left,v=y.top;g+=a/l,v+=s/d,this.viewPortTop=v>0?0:-v*t,this.viewPortLeft=g>0?0:-g*t,this.viewPortWidth=p,this.viewPortHeight=c,i.top=this.viewPortTop+"px",i.left=this.viewPortLeft+"px",i.width=p/l+"px",i.height=c/d+"px"},t.prototype.createViewPort=function(){var t=document.createElement("div");t.className="lf-minimap-viewport",t.addEventListener("mousedown",this.startDrag),this.viewport=t},t.pluginName="miniMap",t.width=150,t.height=220,t.viewPortWidth=150,t.viewPortHeight=75,t.isShowHeader=!0,t.isShowCloseIcon=!0,t.leftPosition=0,t.topPosition=0,t.rightPosition=null,t.bottomPosition=null,t.headerTitle="导航",t}();e.MiniMap=r,e.default=r},88265:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionSelect=void 0;var n=function(){function t(t){var e=this,n=t.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(t){var n=e.lf.getPointByClient(t.clientX,t.clientY).domOverlayPosition,o=n.x,i=n.y;e.endPoint={x:o,y:i};var r=e.startPoint,a=r.x,s=r.y,l=e.wrapper.style,d=a,u=s,h=o-a,p=i-s;o<a&&(d=o,h=a-o),i<s&&(u=i,p=s-i),l.left=d+"px",l.top=u+"px",l.width=h+"px",l.height=p+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",e.__draw),document.removeEventListener("mouseup",e.__drawOff),e.wrapper.oncontextmenu=null,e.__domContainer.removeChild(e.wrapper);var t=e.startPoint,n=t.x,o=t.y,i=e.endPoint,r=i.x,a=i.y;if(!(Math.abs(r-n)<10&&Math.abs(a-o)<10)){var s=[Math.min(n,r),Math.min(o,a)],l=[Math.max(n,r),Math.max(o,a)],d=e.lf.graphModel.getAreaElement(s,l,e.isWholeEdge,e.isWholeNode,!0),u=e.lf.graphModel.group;d.forEach((function(t){u&&u.getNodeGroup(t.id)||e.lf.selectElementById(t.id,!0)})),e.lf.emit("selection:selected",d)}},this.lf=n;var o=n.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=o,n.openSelectionSelect=function(){e.openSelectionSelect()},n.closeSelectionSelect=function(){e.closeSelectionSelect()}}return t.prototype.render=function(t,e){var n=this;this.__domContainer=e,t.on("blank:mousedown",(function(o){var i=o.e;if(t.getEditConfig().stopMoveGraph&&!n.__disabled&&2!==i.button){var r=t.getPointByClient(i.clientX,i.clientY).domOverlayPosition,a=r.x,s=r.y;n.startPoint={x:a,y:s},n.endPoint={x:a,y:s};var l=document.createElement("div");l.className="lf-selection-select",l.oncontextmenu=function(t){t.preventDefault()},l.style.top=n.startPoint.y+"px",l.style.left=n.startPoint.x+"px",e.appendChild(l),n.wrapper=l,document.addEventListener("mousemove",n.__draw),document.addEventListener("mouseup",n.__drawOff)}}))},t.prototype.setSelectionSense=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this.isWholeEdge=t,this.isWholeNode=e},t.prototype.openSelectionSelect=function(){this.lf.getEditConfig().stopMoveGraph||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},t.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},t.prototype.open=function(){this.__disabled=!1},t.prototype.close=function(){this.__disabled=!0},t.pluginName="selectionSelect",t}();e.SelectionSelect=n},17834:function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||o(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(90482),e),i(n(7072),e),i(n(7768),e),i(n(26130),e),i(n(12739),e),i(n(58007),e),i(n(3638),e),i(n(45245),e),i(n(9283),e),i(n(30517),e),i(n(28833),e),i(n(88265),e),i(n(66787),e),i(n(8153),e),i(n(83027),e),i(n(87023),e),i(n(20689),e),i(n(27353),e),i(n(25145),e),i(n(97063),e),i(n(60920),e)},17821:(t,e)=>{var n;function o(t){return t*t}function i(t,e){return o(t.x-e.x)+o(t.y-e.y)}Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeInSegment=e.crossPointInSegment=e.distToSegment=e.distToSegmentSquared=e.isInSegment=void 0,function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(n||(n={})),e.isInSegment=function(t,n,o,i){return void 0===i&&(i=0),e.distToSegment(t,n,o)<=i},e.distToSegmentSquared=function(t,e,n){var o=i(e,n);if(0===o)return i(t,e);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/o;return r=Math.max(0,Math.min(1,r)),i(t,{x:e.x+r*(n.x-e.x),y:e.y+r*(n.y-e.y)})},e.distToSegment=function(t,n,o){return Math.sqrt(e.distToSegmentSquared(t,n,o))},e.crossPointInSegment=function(t,e,o){var i=function(t){var e=t.x,n=t.y,o=t.width,i=t.height;return{minX:e-o/2,minY:n-i/2,maxX:e+o/2,maxY:n+i/2,x:e,y:n,width:o,height:i,centerX:e,centerY:n}}(t),r=function(t,e){var o;return t.x===e.x?o=n.VERTICAL:t.y===e.y&&(o=n.HORIZONTAL),o}(e,o),a=Math.max(e.x,o.x),s=Math.min(e.x,o.x),l=Math.max(e.y,o.y),d=Math.min(e.y,o.y),u=t.x,h=t.y,p=t.width,c=t.height;if(r===n.HORIZONTAL){if(a>=i.maxX&&s<=i.minX)return{startCrossPoint:{x:e.x>o.x?u+p/2:u-p/2,y:e.y},endCrossPoint:{x:e.x>o.x?u-p/2:u+p/2,y:e.y}}}else if(r===n.VERTICAL&&l>=i.maxY&&d<=i.minY)return{startCrossPoint:{x:e.x,y:e.y>o.y?h+c/2:h-c/2},endCrossPoint:{x:e.x,y:e.y>o.y?h-c/2:h+c/2}}},e.isNodeInSegment=function(t,n,o){void 0===o&&(o=0);for(var i=t.x,r=t.y,a=n.pointsList,s=0;s<a.length-1;s++)if(e.isInSegment({x:i,y:r},a[s],a[s+1],o)){var l=e.crossPointInSegment(t,a[s],a[s+1]);if(l)return{crossIndex:s+1,crossPoints:l}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}}},3638:function(t,e,n){var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.InsertNodeInPolyline=void 0;var r=n(41918),a=n(47699),s=n(17821),l=function(){function t(t){var e=t.lf;this._lf=e,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}return t.prototype.eventHandler=function(){var t=this;this.dndAdd&&this._lf.on("node:dnd-add",(function(e){var n=e.data;t.insetNode(n)})),this.dropAdd&&this._lf.on("node:drop",(function(e){for(var n=e.data,o=t._lf.graphModel.edges,i=n.id,r=!0,a=0;a<o.length;a++)if(o[a].sourceNodeId===i||o[a].targetNodeId===i){r=!1;break}r&&t.insetNode(n)}))},t.prototype.checkRuleBeforeInsetNode=function(t,e,n,o,i){var a=this._lf.getNodeModelById(t),s=this._lf.getNodeModelById(e),l=a.getAnchorInfo(n),d=s.getAnchorInfo(o),u=a.isAllowConnectedAsSource(i,l,d),h=s.isAllowConnectedAsTarget(i,l,d),p=r.formateAnchorConnectValidateData(u),c=p.isAllPass,f=p.msg,y=r.formateAnchorConnectValidateData(h),g=y.isAllPass;return{isPass:c&&g,sourceMsg:f,targetMsg:y.msg}},t.prototype.insetNode=function(t){var e=this,n=this._lf.graphModel.edges,o=this._lf.getNodeModelById(t.id),l=o.getDefaultAnchor();if(l&&0!==l.length)for(var d=0;d<n.length;d++){var u=s.isNodeInSegment(o,n[d],this.deviation),h=u.crossIndex,p=u.crossPoints;if(h>=0){var c=n[d],f=c.sourceNodeId,y=c.targetNodeId,g=c.id,v=c.type,m=c.pointsList,x=c.sourceAnchorId,b=c.targetAnchorId,w=a.cloneDeep(m[0]),_=a.cloneDeep(p.startCrossPoint);this._lf.deleteEdge(g);var M=this.checkRuleBeforeInsetNode(f,y,x,b,t);if(this._lf.addEdge({type:v,sourceNodeId:f,targetNodeId:t.id,startPoint:w,endPoint:_,pointsList:i(m.slice(0,h),[p.startCrossPoint])}),this._lf.addEdge({type:v,sourceNodeId:t.id,targetNodeId:y,startPoint:a.cloneDeep(p.endCrossPoint),endPoint:a.cloneDeep(m[m.length-1]),pointsList:i([p.endCrossPoint],m.slice(h))}),M.isPass)break;this._lf.graphModel.eventCenter.emit(r.EventType.CONNECTION_NOT_ALLOWED,{data:t,msg:M.targetMsg||M.sourceMsg}),setTimeout((function(){e._lf.undo()}),200);break}}else this._lf.graphModel.eventCenter.emit(r.EventType.CONNECTION_NOT_ALLOWED,{data:t,msg:"自定义类型节点不显示锚点，也不允许其他节点连接到此节点"})},t.pluginName="insertNodeInPolyline",t}();e.InsertNodeInPolyline=l,e.default=l},8153:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.getCurvedEdgePath=e.CurvedEdgeModel=e.CurvedEdge=void 0;var s=n(41918),l={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function d(t,e,n,o){var i,r="",s="";t[0]===e[0]?r=t[1]>e[1]?"t":"b":t[1]===e[1]&&(r=t[0]>e[0]?"l":"r"),e[0]===n[0]?s=e[1]>n[1]?"t":"b":e[1]===n[1]&&(s=e[0]>n[0]?"l":"r");var d=Math.min(Math.hypot(e[0]-t[0],e[1]-t[1])/2,Math.hypot(n[0]-e[0],n[1]-e[1])/2,o)||.2*o,u=""+r+s,h=l[u]||"-",p="L "+t[0]+" "+t[1];if("-"===h)p+="L "+e[0]+" "+e[1]+" L "+n[0]+" "+n[1];else{var c=a(function(t,e,n,o){var i=[t[0],t[1]],r=[t[0],t[1]];switch(n){case"tl":return"tr"===e?(i[1]+=o,r[0]+=o):"lb"===e&&(i[0]+=o,r[1]+=o),[i,r];case"tr":return"tl"===e?(i[1]+=o,r[0]-=o):"rb"===e&&(i[0]-=o,r[1]+=o),[i,r];case"bl":return"br"===e?(i[1]-=o,r[0]+=o):"lt"===e&&(i[0]+=o,r[1]-=o),[i,r];case"br":return"bl"===e?(i[1]-=o,r[0]-=o):"rt"===e&&(i[0]-=o,r[1]-=o),[i,r];default:return[]}}(e,u,h,d),2),f=c[0],y=c[1];f&&y&&(p+="L "+f[0]+" "+f[1]+" Q "+e[0]+" "+e[1]+" "+y[0]+" "+y[1],i=a(y,2),e[0]=i[0],e[1]=i[1])}return p}function u(t,e){var n=0,o="";if(2===t.length)o+="M"+t[n][0]+" "+t[n++][1]+" L "+t[n][0]+" "+t[n][1];else{for(o+="M"+t[n][0]+" "+t[n++][1];n+1<t.length;)o+=d(t[n-1],t[n],t[1+n++],e);o+="L "+t[n][0]+" "+t[n][1]}return o}e.getCurvedEdgePath=u;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getEdge=function(){var t=this.props.model,e=t.points,n=t.isAnimation,o=t.arrowConfig,i=t.radius,l=void 0===i?5:i,d=t.getEdgeStyle(),h=t.getEdgeAnimationStyle(),p=function(t){for(var e=t,n=1;n<e.length-1;){var o=a(e[n-1],2),i=o[0],r=o[1],s=a(e[n],2),l=s[0],d=s[1],u=a(e[n+1],2),h=u[0],p=u[1];i===l&&l===h||r===d&&d===p?e.splice(n,1):n++}return e}(e.split(" ").map((function(t){return t.split(",").map((function(t){return+t}))}))),c=u(p,l),f=r(r(r({style:n?h:{}},d),o),{fill:"none"});return s.h("path",r({d:c},f))},e}(s.PolylineEdge);e.CurvedEdge=h;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s.PolylineEdgeModel);e.CurvedEdgeModel=p;var c={type:"curved-edge",view:h,model:p};e.default=c},55032:function(t,e,n){var o,i=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var l=n(41918),d=n(87023),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isGroup=!0,e.unfoldedWidth=500,e.unfoldedHight=300,e.childrenLastFoldStatus={},e}return i(e,t),e.prototype.initNodeData=function(e){var n=this;t.prototype.initNodeData.call(this,e);var o=[];Array.isArray(e.children)&&(o=e.children),this.children=new Set(o),this.width=500,this.height=300,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=-1e4,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,void 0===this.properties.isFolded&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout((function(){n.isFolded&&n.foldGroup(n.isFolded)}))},e.prototype.getResizeOutlineStyle=function(){var e=t.prototype.getResizeOutlineStyle.call(this);return e.stroke="none",e},e.prototype.foldGroup=function(t){var e=this;if(t!==this.isFolded){this.setProperty("isFolded",t),this.isFolded=t,t?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var n=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach((function(o){var i=e.graphModel.getElement(o),r=i.isFolded;if(i.isGroup&&!i.isFolded&&i.foldGroup(t),i.isGroup&&!t){var a=e.childrenLastFoldStatus[o];void 0!==a&&a!==i.isFolded&&i.foldGroup(a)}e.childrenLastFoldStatus[o]=r,i.visible=!t,n=n.concat(i.incoming.edges.concat(i.outgoing.edges))})),this.foldEdge(t,n)}},e.prototype.getAnchorStyle=function(e){var n=t.prototype.getAnchorStyle.call(this,e);return n.stroke="transparent",n.fill="transparent",n.hover.fill="transparent",n.hover.stroke="transparent",n},e.prototype.foldEdge=function(t,e){var n=this;e.forEach((function(e,o){var i=e.id,r=e.sourceNodeId,a=e.targetNodeId,s=e.startPoint,l=e.endPoint,d=e.type,u=e.text,h={id:i+"__"+o,sourceNodeId:r,targetNodeId:a,startPoint:s,endPoint:l,type:d,properties:e.getProperties(),text:null==u?void 0:u.value};e.virtual&&n.graphModel.deleteEdgeById(e.id);var p=n.graphModel.group.getNodeGroup(a);p||(p=n.graphModel.getNodeModelById(a));var c=n.graphModel.group.getNodeGroup(r);c||(c=n.graphModel.getNodeModelById(r)),t&&!1!==e.visible&&(n.children.has(r)||n.id===r?(h.startPoint=void 0,h.sourceNodeId=n.id):(h.endPoint=void 0,h.targetNodeId=n.id),p.id===n.id&&c.id===n.id||n.createVirtualEdge(h),e.visible=!1),t||!1!==e.visible||(p&&p.isGroup&&p.isFolded?(h.targetNodeId=p.id,h.endPoint=void 0,n.createVirtualEdge(h)):c&&c.isGroup&&c.isFolded?(h.sourceNodeId=c.id,h.startPoint=void 0,n.createVirtualEdge(h)):e.visible=!0)}))},e.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var e=this.graphModel.addEdge(t);e.virtual=!0,e.text.editable=!1,e.isFoldedEdge=!0},e.prototype.isInRange=function(t){var e=t.x1,n=t.y1,o=t.x2,i=t.y2;return e>=this.x-this.width/2&&o<=this.x+this.width/2&&n>=this.y-this.height/2&&i<=this.y+this.height/2},e.prototype.isAllowMoveTo=function(t){var e=t.x1,n=t.y1,o=t.x2,i=t.y2;return{x:e>=this.x-this.width/2&&o<=this.x+this.width/2,y:n>=this.y-this.height/2&&i<=this.y+this.height/2}},e.prototype.setAllowAppendChild=function(t){this.setProperty("groupAddable",t)},e.prototype.addChild=function(t){this.children.add(t),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},e.prototype.removeChild=function(t){this.children.delete(t),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},e.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},e.prototype.getData=function(){var e=this,n=t.prototype.getData.call(this);n.children=[],this.children.forEach((function(t){var o=e.graphModel.getNodeModelById(t);o&&!o.virtual&&n.children.push(t)}));var o=n.properties;return delete o.groupAddable,delete o.isFolded,n},e.prototype.getHistoryData=function(){var e=t.prototype.getData.call(this);e.children=s(this.children),e.isGroup=!0;var n=e.properties;return delete n.groupAddable,n.isFolded&&(e.x=e.x+this.unfoldedWidth/2-this.foldedWidth/2,e.y=e.y+this.unfoldedHight/2-this.foldedHeight/2),e},e.prototype.isAllowAppendIn=function(t){return!0},e.prototype.toBack=function(){this.zIndex--},e}(d.RectResize.model),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getControlGroup=function(){var e=this.props.model,n=e.resizable,o=e.properties;return n&&!o.isFolded?t.prototype.getControlGroup.call(this):null},e.prototype.getAddableShape=function(){var t=this.props.model,e=t.width,n=t.height,o=t.x,i=t.y,a=t.radius;if(!t.properties.groupAddable)return null;var s=this.props.model.getNodeStyle().strokeWidth,d=this.props.model.getAddableOutlineStyle(),u=e+s+8,h=n+s+8;return l.h("rect",r(r({},d),{width:u,height:h,x:o-u/2,y:i-h/2,rx:a,ry:a}))},e.prototype.getFoldIcon=function(){var t=this.props.model,e=t.x-t.width/2+5,n=t.y-t.height/2+5;if(!t.foldable)return null;var o=l.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:t.properties.isFolded?"M "+(e+3)+","+(n+6)+" "+(e+11)+","+(n+6)+" M"+(e+7)+","+(n+2)+" "+(e+7)+","+(n+10):"M "+(e+3)+","+(n+6)+" "+(e+11)+","+(n+6)+" "});return l.h("g",{},[l.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:t.x-t.width/2+5,y:t.y-t.height/2+5,onClick:function(){t.foldGroup(!t.properties.isFolded)}}),o])},e.prototype.getResizeShape=function(){return l.h("g",{},[this.getAddableShape(),t.prototype.getResizeShape.call(this),this.getFoldIcon()])},e}(d.RectResize.view);e.default={type:"group",view:h,model:u}},83027:function(t,e,n){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)},i=this&&this.__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.GroupNode=e.Group=void 0;var s=n(41918),l=n(55032);e.GroupNode=l.default;var d=-1e4,u=function(){function t(t){var e=this,n=t.lf;this.topGroupZIndex=d,this.nodeGroupMap=new Map,this.graphRendered=function(t){t&&t.nodes&&(t.nodes.forEach((function(t){t.children&&t.children.forEach((function(n){e.nodeGroupMap.set(n,t.id)}))})),e.checkAndCorrectTopGroupZIndex(t.nodes))},this.appendNodeToGroup=function(t){var n=t.data,o=e.nodeGroupMap.get(n.id);if(o){var i=e.lf.getNodeModelById(o);i.removeChild(n.id),e.nodeGroupMap.delete(n.id),i.setAllowAppendChild(!1)}var r=e.lf.getNodeModelById(n.id),a=r.getBounds(),s=e.getGroup(a,n);r.isGroup&&(n.children.forEach((function(t){e.nodeGroupMap.set(t,n.id)})),e.checkAndCorrectTopGroupZIndex([n]),e.nodeSelected({data:n,isSelected:!1,isMultiple:!1})),s&&(s.isAllowAppendIn(n)?(s.addChild(n.id),e.nodeGroupMap.set(n.id,s.id),s.setAllowAppendChild(!1)):e.lf.emit("group:not-allowed",{group:s.getData(),node:n}))},this.deleteGroupChild=function(t){var n=t.data;n.children&&n.children.forEach((function(t){e.nodeGroupMap.delete(t),e.lf.deleteNode(t)}));var o=e.nodeGroupMap.get(n.id);o&&(e.lf.getNodeModelById(o).removeChild(n.id),e.nodeGroupMap.delete(n.id))},this.setActiveGroup=function(t){var n=t.data,o=e.lf.getNodeModelById(n.id),i=o.getBounds(),r=e.getGroup(i,n);e.activeGroup&&e.activeGroup.setAllowAppendChild(!1),!r||o.isGroup&&r.id===n.id||r.isAllowAppendIn(n)&&(e.activeGroup=r,e.activeGroup.setAllowAppendChild(!0))},this.findNodeAndChildMaxZIndex=function(t){var n=d;return t.isGroup&&(n=t.zIndex>n?t.zIndex:n),t.children&&t.children.forEach((function(t){"object"==typeof t&&(t=t.id);var o=e.lf.getNodeModelById(t);if(o.isGroup){var i=e.findNodeAndChildMaxZIndex(o);n=i>n?i:n}})),n},this.checkAndCorrectTopGroupZIndex=function(t){var n=d;if(t.forEach((function(t){var o=e.lf.getNodeModelById(t.id),i=e.findNodeAndChildMaxZIndex(o);i>n&&(n=i)})),!(e.topGroupZIndex>=n)){for(var o=e.lf.graphModel.nodes.filter((function(t){return t.isGroup})),i=e.topGroupZIndex,r=0;r<o.length;r++){var a=o[r];a.zIndex>i&&(i=a.zIndex)}e.topGroupZIndex=i}},this.nodeSelected=function(t){var n=t.data,o=t.isMultiple,i=t.isSelected,r=e.lf.getNodeModelById(n.id);if(e.toFrontGroup(r),e.topGroupZIndex>-1e3){e.topGroupZIndex=d;for(var a=e.lf.graphModel.nodes.filter((function(t){return t.isGroup})).sort((function(t,e){return t.zIndex-e.zIndex})),s=0,l=0;l<a.length;l++){var u=a[l];u.zIndex!==s&&(e.topGroupZIndex++,s=u.zIndex),u.setZIndex(e.topGroupZIndex)}}if(o&&i)if(r.isGroup)r.children.forEach((function(t){e.lf.graphModel.getElement(t).setSelected(!1)}));else{var h=e.nodeGroupMap.get(n.id);h&&e.lf.getNodeModelById(h).isSelected&&r.setSelected(!1)}},this.toFrontGroup=function(t){t&&t.isGroup&&(e.topGroupZIndex++,t.setZIndex(e.topGroupZIndex),t.children&&t.children.forEach((function(t){var n=e.lf.getNodeModelById(t);e.toFrontGroup(n)})))},n.register(l.default),this.lf=n,n.graphModel.addNodeMoveRules((function(t,o,i){if(t.isGroup){var r=e.getNodeAllChild(t);return n.graphModel.moveNodes(r,o,i,!0),!0}var a=n.getNodeModelById(e.nodeGroupMap.get(t.id));if(a&&a.isRestrict){var s=t.getBounds(),l=s.x1,d=s.y1,u=s.x2,h=s.y2;return a.isAllowMoveTo({x1:l+o,y1:d+i,x2:u+o,y2:h+i})}return!0})),n.graphModel.group=this,n.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),n.on("node:delete",this.deleteGroupChild),n.on("node:dnd-drag,node:drag",this.setActiveGroup),n.on("node:click",this.nodeSelected),n.on("graph:rendered",this.graphRendered),n.addElements=function(t,o){for(var r=t.nodes,s=t.edges,l={},d={nodes:[],edges:[]},u=[],h=0;h<r.length;h++){var p=r[h],c=p.id,f=p.children,y=i(p,["children"]),g=n.addNode(y);if(!g)return{nodes:[],edges:[]};c&&(l[c]=g.id),d.nodes.push(g);var v=e.createAllChildNodes(l,f,g,o).edgesArray;u.push.apply(u,a(v))}return u.forEach((function(t){e.createEdgeModel(t,l,o)})),s.forEach((function(t){var n=e.createEdgeModel(t,l,0);d.edges.push(n)})),d}}return t.prototype.createAllChildNodes=function(t,e,n,i){var r=this,l=this.lf,d=[],u=[],h=[];null==e||e.forEach((function(e){var p=l.getNodeModelById(e),c=p.x,f=p.y,y=p.properties,g=p.type,v=p.text,m=p.rotate,x=p.children,b=(p.incoming,p.outgoing,s.EventType.NODE_GROUP_COPY||"node:group-copy-add"),w=l.addNode({x:c+i,y:f+i,properties:y,type:g,text:o(o({},v),{x:v.x+i,y:v.y+i}),rotate:m},b);if(n.addChild(w.id),t[e]=w.id,h.push(w),p.incoming.edges.forEach((function(t){u.push(t)})),p.outgoing.edges.forEach((function(t){u.push(t)})),x instanceof Set){var _=r.createAllChildNodes(t,x,w,i),M=_.nodesArray,E=_.edgesArray;h.push.apply(h,a(M)),d.push.apply(d,a(E))}}));var p=u.filter((function(e){return t[e.sourceNodeId]&&t[e.targetNodeId]})).map((function(t){return t.getData()}));return{nodesArray:h,edgesArray:d.concat(p)}},t.prototype.createEdgeModel=function(t,e,n){var o=this.lf,r=t.sourceNodeId,a=t.targetNodeId;e[r]&&(r=e[r]),e[a]&&(a=e[a]);var s=t.type,l=t.startPoint,d=t.endPoint,u=t.pointsList,h=t.text,p=(i(t,["type","startPoint","endPoint","pointsList","text"]),{x:l.x+n,y:l.y+n}),c={x:d.x+n,y:d.y+n},f=[];u&&u.length>0&&(f=u.map((function(t){return t.x+=n,t.y+=n,t})));var y=h;return h&&"string"!=typeof h&&(y.x=h.x+n,y.y=h.y+n),o.graphModel.addEdge({type:s,startPoint:p,endPoint:c,sourceNodeId:r,targetNodeId:a,pointsList:f,text:y})},t.prototype.getNodeAllChild=function(t){var e=this,n=[];return t.children&&t.children.forEach((function(t){n.push(t);var o=e.lf.getNodeModelById(t);o.isGroup&&(n=n.concat(e.getNodeAllChild(o)))})),n},t.prototype.getGroup=function(t,e){var n=this.lf.graphModel.nodes.filter((function(n){return n.isGroup&&n.isInRange(t)&&n.id!==e.id}));if(0!==n.length){if(1===n.length)return n[0];for(var o=n[n.length-1],i=n.length-2;i>=0;i--)n[i].zIndex>o.zIndex&&(o=n[i]);return o}},t.prototype.getNodeGroup=function(t){var e=this.nodeGroupMap.get(t);if(e)return this.lf.getNodeModelById(e)},t.pluginName="group",t}();e.Group=u},27353:function(t,e){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoLayout=void 0;var o=function(){function t(t){var e=this,n=t.lf;this.lf=n,this.trunk=[],n.layout=function(t){var n=e.lf.getGraphRawData();e.lf.setStartNodeType(t);var o=e.lf.getPathes();return e.levelHeight=[],e.newNodeMap=new Map,e.layout(n,o)}}return t.prototype.layout=function(t,e){var n=this,o=[];e.forEach((function(t){var e=t.elements;e.length>o.length?o=e:e.length===o.length&&JSON.stringify(e)===JSON.stringify(n.trunk)&&(o=n.trunk)})),this.trunk=o;for(var i=this.formatData(t),r={nodes:[],edges:[]},a=o.length-1;a>=0;a--)this.setNodePosition(o[a],i,r,a,1);this.lf.graphModel.graphDataToModel(r)},t.prototype.setNodePosition=function(t,e,o,i,r){var a=this,s=e[t],l=s.text,d=s.type,u=s.next,h=s.properties,p=160*i+40,c=120*r,f={id:t,x:p,text:l,y:c,type:d,properties:h};return l&&"object"==typeof l&&(f.text=n(n({},l),{x:p+l.x,y:c+l.y})),this.newNodeMap.set(f.id,{x:f.x,y:f.y,type:d}),o.nodes.push(f),s.isFixed=!0,this.addLevelHeight(i,1),u&&u.length>0&&u.forEach((function(r){if(!e[r.nodeId].isFixed){var s=a.getLevelHeight(i+1);a.addLevelHeight(i,1),a.setNodePosition(r.nodeId,e,o,i+1,s+1)}o.edges.push(n({id:r.edgeId,type:r.edgeType,sourceNodeId:t,targetNodeId:r.nodeId,properties:r.properties,text:r.text},a.getEdgeDataPoints(t,r.nodeId)))})),f},t.prototype.getEdgeDataPoints=function(t,e){var n=this.newNodeMap.get(t),o=this.newNodeMap.get(e),i=this.getShape(t),r=i.width,a=i.height,s=this.getShape(e),l=s.width,d=s.height,u=this.getRelativePosition(n,o),h={x:n.x,y:n.y},p={x:o.x,y:o.y};switch(u){case 0:h.x=n.x+r/2,p.x=o.x-l/2;break;case-1:h.y=n.y+a/2,p.x=o.x-l/2;break;case 1:h.x=n.x+r/2,p.y=o.y+d/2}return{startPoint:h,endPoint:p}},t.prototype.getRelativePosition=function(t,e){var n=t.y,o=e.y;return n<o?-1:n===o?0:1},t.prototype.getShape=function(t){var e=this.lf.getNodeModelById(t);return{height:e.height,width:e.width}},t.prototype.formatData=function(t){var e=t.nodes.reduce((function(t,e){var n=e.type,o=e.properties,i=e.text,r=e.x,a=e.y;return i&&"object"==typeof i&&(i.x=i.x-r,i.y=i.y-a),t[e.id]={type:n,properties:o,text:i,prev:[],next:[]},t}),{});return t.edges.forEach((function(t){var n=t.sourceNodeId,o=t.targetNodeId,i=t.id,r=t.properties,a=t.text,s=a;"object"==typeof a&&(s=a.value),e[n].next.push({edgeId:i,nodeId:o,edgeType:t.type,properties:r,text:s}),e[o].prev.push({edgeId:i,nodeId:n,properties:r,text:s})})),e},t.prototype.addLevelHeight=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);var o=this.levelHeight[t];o||(o={positiveHeight:0,negativeHeight:0},this.levelHeight[t]=o),n?o.negativeHeight-=e:o.positiveHeight+=e},t.prototype.getLevelHeight=function(t,e){void 0===e&&(e=!1);var n=this.levelHeight[t];return n?e?n.negativeHeight:n.positiveHeight:0},t.pluginName="AutoLayout",t}();e.AutoLayout=o},20689:function(t,e,n){var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.FlowPath=void 0;var r=n(97510),a=function(){function t(t){var e=this,n=t.lf;this.lf=n,this.pathes=[],n.getPathes=function(){if(!e.startNodeType)throw new Error("需要预先指定开始节点类型");return e.getPathes()},n.setRawPathes=function(t){e.setPathes(t)},n.getRawPathes=function(){return e.pathes},n.setStartNodeType=function(t){e.startNodeType=t}}return t.prototype.setPathes=function(t){this.pathes=t.map((function(t){return{routeId:t.routeId,name:t.name,elements:t.elements,type:t.type,similarElement:null,weight:0}}))},t.prototype.getPathes=function(){var t=this,e=this.lf.getGraphRawData(),n=new Map,o=[];e.nodes.forEach((function(e){n.set(e.id,{id:e.id,data:e,nextNodes:[]}),e.type===t.startNodeType&&o.push(e.id)})),e.edges.forEach((function(t){n.get(t.sourceNodeId).nextNodes.push(t.targetNodeId)}));var i=[];return o.forEach((function(e){i=i.concat(t.findPathElements(n.get(e),n,[]))})),this.getNewPathes(i)},t.prototype.findPathElements=function(t,e,n){void 0===n&&(n=[]);var o=i(n);if(o.push(t.id),0===t.nextNodes.length)return[o];for(var r=[],a=0;a<t.nextNodes.length;a++){var s,l=e.get(t.nextNodes[a]),d=o.indexOf(l.id);s=-1!==d?[i(o.slice(d),[l.id])]:this.findPathElements(l,e,i(o)),r=r.concat(s)}return r},t.prototype.getNewPathes=function(t){var e=this,n=[],o=new Set;t.forEach((function(t){var i=e.getNewId("path"),r=e.getNewId("路径"),a=e.isLoopPath(t),s=t.join(",");o.has(s)||(o.add(s),n.push({routeId:i,name:r,elements:t,type:a,weight:0,similarElement:""}))}));var r=JSON.parse(JSON.stringify(this.pathes));return n.forEach((function(t){for(var n=0;n<r.length;n++){var o=r[n],a=e.similar2Path(i(t.elements),i(o.elements));a>t.weight&&o.weight<=a&&(t.weight=a,t.similarElement=o,a===o.weight&&o.similarElement?(o.similarElement.similarElement=null,o.similarElement.weight=0,o.similarElement=null,o.weight=0):(o.similarElement=t,o.weight=a))}})),n.forEach((function(t){t.similarElement&&t.similarElement.similarElement===t&&(t.routeId=t.similarElement.routeId,t.name=t.similarElement.name),delete t.similarElement,delete t.weight})),this.setPathes(n),n},t.prototype.similar2Path=function(t,e){var n=0,o=t.length+e.length;t.sort(),e.sort();for(var i=t.shift(),r=e.shift();void 0!==i&&void 0!==r;)i===r?(n++,i=t.shift(),r=e.shift()):i<r?i=t.shift():i>r&&(r=e.shift());return n/o*200},t.prototype.getNewId=function(t){return t+"_"+r.getBpmnId()},t.prototype.isLoopPath=function(t){var e=t.length;return t.indexOf(t[e-1])!==e-1?1:0},t.pluginName="flowPath",t}();e.FlowPath=a},12739:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Snapshot=void 0;var n=function(){function t(t){var e=this,n=t.lf;this.lf=n,this.customCssRules="",this.useGlobalRules=!0,n.getSnapshot=function(t,n){e.getSnapshot(t,n)},n.getSnapshotBlob=function(t){return e.getSnapshotBlob(t)},n.getSnapshotBase64=function(t){return e.getSnapshotBase64(t)}}return t.prototype.getSvgRootElement=function(t){return t.container.querySelector(".lf-canvas-overlay")},t.prototype.triggerDownload=function(t){var e=new MouseEvent("click",{view:document.defaultView,bubbles:!1,cancelable:!0}),n=document.createElement("a");n.setAttribute("download",this.fileName),n.setAttribute("href",t),n.setAttribute("target","_blank"),n.dispatchEvent(e)},t.prototype.removeAnchor=function(t){for(var e=t.childNodes,n=t.childNodes&&t.childNodes.length,o=0;o<n;o++){var i=e[o];(i.classList&&Array.from(i.classList)||[]).indexOf("lf-anchor")>-1&&(t.removeChild(t.childNodes[o]),n--,o--)}},t.prototype.removeRotateControl=function(t){for(var e=t.childNodes,n=t.childNodes&&t.childNodes.length,o=0;o<n;o++){var i=e[o];(i.classList&&Array.from(i.classList)||[]).indexOf("lf-rotate-control")>-1&&(t.removeChild(t.childNodes[o]),n--,o--)}},t.prototype.getSnapshot=function(t,e){var n=this;this.fileName=t||"logic-flow."+Date.now()+".png";var o=this.getSvgRootElement(this.lf);this.getCanvasData(o,e).then((function(t){var e=t.toDataURL("image/png").replace("image/png","image/octet-stream");n.triggerDownload(e)}))},t.prototype.getSnapshotBase64=function(t){var e=this,n=this.getSvgRootElement(this.lf);return new Promise((function(o){e.getCanvasData(n,t).then((function(t){var e=t.toDataURL("image/png");o({data:e,width:t.width,height:t.height})}))}))},t.prototype.getSnapshotBlob=function(t){var e=this,n=this.getSvgRootElement(this.lf);return new Promise((function(o){e.getCanvasData(n,t).then((function(t){t.toBlob((function(e){o({data:e,width:t.width,height:t.height})}),"image/png")}))}))},t.prototype.getClassRules=function(){var t="";if(this.useGlobalRules)for(var e=document.styleSheets,n=0;n<e.length;n++)for(var o=e[n],i=0;i<o.cssRules.length;i++)t+=o.cssRules[i].cssText;return this.customCssRules&&(t+=this.customCssRules),t},t.prototype.getCanvasData=function(t,e){var n=this,o=t.cloneNode(!0),i=o.lastChild,r=i.childNodes&&i.childNodes.length;if(r)for(var a=0;a<r;a++){var s=i.childNodes[a],l=s.classList&&Array.from(s.classList);if(l&&l.indexOf("lf-base")<0)i.removeChild(i.childNodes[a]),r--,a--;else{var d=i.childNodes[a];d&&d.childNodes.forEach((function(t){var e=t;n.removeAnchor(e.firstChild),n.removeRotateControl(e.firstChild)}))}}var u=window.devicePixelRatio||1;u<1&&(u=1);var h=document.createElement("canvas"),p=this.lf.graphModel.rootEl.querySelector(".lf-base").getBoundingClientRect(),c=this.lf.container.querySelector(".lf-canvas-overlay").getBoundingClientRect(),f=p.x-c.x,y=p.y-c.y,g=this.lf.graphModel.transformModel,v=g.SCALE_X,m=g.SCALE_Y,x=g.TRANSLATE_X,b=g.TRANSLATE_Y;o.lastChild.style.transform="matrix(1, 0, 0, 1, "+((-f+x)*(1/v)+10)+", "+((-y+b)*(1/m)+10)+")";var w=Math.ceil(p.width/v),_=Math.ceil(p.height/m);h.style.width=w+"px",h.style.height=_+"px",h.width=w*u+80,h.height=_*u+80;var M=h.getContext("2d");M.clearRect(0,0,h.width,h.height),M.scale(u,u),e?(M.fillStyle=e,M.fillRect(0,0,w*u+80,_*u+80)):M.clearRect(0,0,w,_);var E=new Image,P=document.createElement("style");P.innerHTML=this.getClassRules();var O=document.createElement("foreignObject");return O.appendChild(P),o.appendChild(O),new Promise((function(t){E.onload=function(){var e=navigator.userAgent.indexOf("Firefox")>-1;try{e?createImageBitmap(E,{resizeWidth:h.width,resizeHeight:h.height}).then((function(e){M.drawImage(e,0,0),t(h)})):(M.drawImage(E,0,0),t(h))}catch(e){M.drawImage(E,0,0),t(h)}};var e=("data:image/svg+xml;charset=utf-8,"+(new XMLSerializer).serializeToString(o)).replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23");E.src=e}))},t.pluginName="snapshot",t}();e.Snapshot=n,e.default=n},58007:function(t,e){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.toLogicflowData=e.toTurboData=void 0;var i={1:"bpmn:sequenceFlow",2:"bpmn:startEvent",3:"bpmn:endEvent",4:"bpmn:userTask",6:"bpmn:exclusiveGateway"};function r(t){switch(t){case"bpmn:sequenceFlow":return 1;case"bpmn:startEvent":return 2;case"bpmn:endEvent":return 3;case"bpmn:userTask":return 4;case"bpmn:exclusiveGateway":return 6;default:return t}}function a(t){var e=new Map,o={flowElementList:[]};return t.nodes.forEach((function(t){var i=function(t){var e=t.id,o=(t.type,t.x),i=t.y,a=t.text,s=void 0===a?"":a,l=t.properties;return{incoming:[],outgoing:[],dockers:[],type:r(t.type),properties:n(n({},l),{name:s&&s.value||"",x:o,y:i,text:s}),key:e}}(t);o.flowElementList.push(i),e.set(t.id,i)})),t.edges.forEach((function(t){var i=function(t){var e=t.id,o=t.type,i=t.sourceNodeId,a=t.targetNodeId,s=t.startPoint,l=t.endPoint,d=t.pointsList,u=t.text,h=void 0===u?"":u,p=t.properties;return{incoming:[i],outgoing:[a],type:r(o),dockers:[],properties:n(n({},p),{name:h&&h.value||"",text:h,startPoint:JSON.stringify(s),endPoint:JSON.stringify(l),pointsList:JSON.stringify(d)}),key:e}}(t);e.get(t.sourceNodeId).outgoing.push(i.key),e.get(t.targetNodeId).incoming.push(i.key),o.flowElementList.push(i)})),o}function s(t){var e={nodes:[],edges:[]},n=t.flowElementList;return n&&n.length>0&&n.forEach((function(t){if(1===t.type){var n=function(t){var e=t.incoming,n=t.outgoing,o=t.properties,r=t.key,a=t.type,s=o.text,l=o.name,d=o.startPoint,u=o.endPoint,h=o.pointsList,p={id:r,type:i[a],sourceNodeId:e[0],targetNodeId:n[0],text:s||l,properties:{}};d&&(p.startPoint=JSON.parse(d)),u&&(p.endPoint=JSON.parse(u)),h&&(p.pointsList=JSON.parse(h));var c=["startPoint","endPoint","pointsList","text"];return Object.keys(t.properties).forEach((function(e){-1===c.indexOf(e)&&(p.properties[e]=t.properties[e])})),p}(t);e.edges.push(n)}else{var r=function(t){var e=t.properties,n=t.key,r=t.type,a=t.bounds,s=e.x,l=e.y,d=e.text;if(void 0===s){var u=o(a,2),h=u[0],p=h.x,c=h.y,f=u[1];s=(p+f.x)/2,l=(c+f.y)/2}var y={id:n,type:i[r],x:s,y:l,text:d,properties:{}},g=["x","y","text"];return Object.keys(t.properties).forEach((function(e){-1===g.indexOf(e)&&(y.properties[e]=t.properties[e])})),y}(t);e.nodes.push(r)}})),e}e.toTurboData=a,e.toLogicflowData=s;var l=function(){function t(t){var e=t.lf;e.adapterIn=this.adapterIn,e.adapterOut=this.adapterOut}return t.prototype.adapterOut=function(t){if(t)return a(t)},t.prototype.adapterIn=function(t){if(t)return s(t)},t.pluginName="turboAdapter",t}();e.default=l},48160:t=>{var e=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function n(t,n){if(t.length!==n.length)return!1;for(var o=0;o<t.length;o++)if(!((i=t[o])===(r=n[o])||e(i)&&e(r)))return!1;var i,r;return!0}t.exports=function(t,e){void 0===e&&(e=n);var o=null;function i(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(o&&o.lastThis===this&&e(n,o.lastArgs))return o.lastResult;var r=t.apply(this,n);return o={lastResult:r,lastArgs:n,lastThis:this},r}return i.clear=function(){o=null},i}}}]);